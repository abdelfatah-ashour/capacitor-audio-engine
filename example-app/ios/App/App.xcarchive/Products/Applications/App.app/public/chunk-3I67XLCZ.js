import{$ as h0,A as e0,Aa as C0,B as a0,Ba as _0,C as J,D as s0,Da as B0,E as c,Ea as L0,F as y,Fa as B1,G as C,Ga as L1,H as c1,Ha as y1,I as l0,Ia as V1,J as o1,K as t1,L as i1,M as Z,N as $1,O as r1,P as b,Q as c0,R as r0,S as g0,T as v0,U as g1,_ as d0,a as Y1,aa as v1,b as K,c as p,d as x,da as w0,e as k,ea as m0,f as J1,g as r,ga as d1,h as N,ha as h1,i as u,ia as w1,j as f,ja as m1,k as o0,ka as p0,l as Q,la as p1,m as H,ma as x1,n as j,na as u1,o as z,oa as x0,p as s,pa as f1,q as a,qa as u0,r as m,ra as M1,s as X,sa as f0,t as Y,ta as M0,u as t0,ua as k1,v as V,va as k0,w as i0,wa as z1,x as w,xa as z0,y as g,ya as C1,z as n0,za as _1}from"./chunk-7FV5YHXK.js";import"./chunk-L2WT5UUU.js";import"./chunk-SKVDGVMT.js";import"./chunk-TOA6HEJY.js";import"./chunk-BWS6GK7D.js";import"./chunk-W2DKFL3W.js";import"./chunk-GFAQE7C7.js";import"./chunk-4U6PRYVA.js";import"./chunk-2W7CVVNW.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import{a as P,b as U,f as d}from"./chunk-RW4GY4BD.js";var S1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M456 128a40 40 0 00-37.23 54.6l-84.17 84.17a39.86 39.86 0 00-29.2 0l-60.17-60.17a40 40 0 10-74.46 0L70.6 306.77a40 40 0 1022.63 22.63L193.4 229.23a39.86 39.86 0 0029.2 0l60.17 60.17a40 40 0 1074.46 0l84.17-84.17A40 40 0 10456 128z'/></svg>";var A1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm108.25 138.29l-134.4 160a16 16 0 01-12 5.71h-.27a16 16 0 01-11.89-5.3l-57.6-64a16 16 0 1123.78-21.4l45.29 50.32 122.59-145.91a16 16 0 0124.5 20.58z'/></svg>";var y0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm75.31 260.69a16 16 0 11-22.62 22.62L256 278.63l-52.69 52.68a16 16 0 01-22.62-22.62L233.37 256l-52.68-52.69a16 16 0 0122.62-22.62L256 233.37l52.69-52.68a16 16 0 0122.62 22.62L278.63 256z'/></svg>";var V0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M103.48 224a71.64 71.64 0 0044.76-15.66l41.5 16.89 6.82-12.63a39.15 39.15 0 014.32-6.37l14.22-14.42-41.17-24.94A72 72 0 10103.48 224zm0-112a40 40 0 11-40 40 40 40 0 0140-40z'/><path d='M480 169l-5.52-12.58c-4.48-10.42-14.74-16-32.78-17.85-10.12-1-26.95-1.24-49.69 3.81-20 4.45-122.14 28.2-164.95 58.62-20.25 14.39-24.06 33.67-27.06 49.16-2.78 14.14-5 25.31-18 35-15 11.14-27.27 16.38-33.58 18.6a71.74 71.74 0 1024.79 38zm-224.52 87a16 16 0 1116-16 16 16 0 01-16 16zm-152 144a40 40 0 1140-40 40 40 0 01-40 40z'/><path d='M343.79 259.87l-83.74 48.18 27.63 13.08 3.62 1.74C310 331.92 359.74 356 410.53 359c3.89.23 7.47.34 10.78.34C442 359.31 453 354 459.75 350L480 336z'/></svg>";var S0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M376 160H272v153.37l52.69-52.68a16 16 0 0122.62 22.62l-80 80a16 16 0 01-22.62 0l-80-80a16 16 0 0122.62-22.62L240 313.37V160H136a56.06 56.06 0 00-56 56v208a56.06 56.06 0 0056 56h240a56.06 56.06 0 0056-56V216a56.06 56.06 0 00-56-56zM272 48a16 16 0 00-32 0v112h32z'/></svg>";var A0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 56C145.72 56 56 145.72 56 256s89.72 200 200 200 200-89.72 200-200S366.28 56 256 56zm0 82a26 26 0 11-26 26 26 26 0 0126-26zm48 226h-88a16 16 0 010-32h28v-88h-16a16 16 0 010-32h32a16 16 0 0116 16v104h28a16 16 0 010 32z'/></svg>";var b0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm-48 128a48.14 48.14 0 0148-48 48.14 48.14 0 0148 48v64a48.14 48.14 0 01-48 48 48.14 48.14 0 01-48-48zm144 72.22c0 23.36-10.94 45.61-30.79 62.66A103.71 103.71 0 01272 334.26V352h16a16 16 0 010 32h-64a16 16 0 010-32h16v-17.74a103.71 103.71 0 01-49.21-23.38c-19.85-17.05-30.79-39.3-30.79-62.66V224.3a16 16 0 0132 0v23.92c0 25.66 28 55.48 64 55.48 29.6 0 64-24.23 64-55.48V224.3a16 16 0 1132 0z'/></svg>";var H0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 80a48.14 48.14 0 0148 48v64a47.84 47.84 0 01-.63 7.71 2 2 0 01-3.46 1l-84.42-92.86a4 4 0 01-.47-4.77A48.08 48.08 0 01256 128zm32 256h-63.55c-8.61 0-16-6.62-16.43-15.23A16 16 0 01224 352h16v-17.74a103.71 103.71 0 01-49.21-23.38c-19.85-17.05-30.79-39.3-30.79-62.66V224a15.91 15.91 0 0116.39-16A16.26 16.26 0 01192 224.4v23.82c0 25.66 28 55.48 64 55.48 1.67 0 3.37-.09 5.06-.24a3.94 3.94 0 013.29 1.29l21.07 23.19a2 2 0 01-.89 3.26 100.33 100.33 0 01-12.53 3.06V352h15.55c8.61 0 16 6.62 16.43 15.23A16 16 0 01288 384zm-77.89-138.91l36.46 40.11a1 1 0 01-.95 1.66 48.26 48.26 0 01-37.25-41 1 1 0 011.74-.77zm152.65 119.75a16 16 0 01-22.6-1.08l-192-210a16 16 0 0123.68-21.52l192 210a16 16 0 01-1.08 22.6zM352 248.22a77.12 77.12 0 01-11.93 40.87 2 2 0 01-3.19.3l-19.19-21.1a4 4 0 01-.76-4.16 43.35 43.35 0 003.07-15.91v-23.8a16.3 16.3 0 0113.64-16.24c9.88-1.48 18.36 6.51 18.36 16.12z'/></svg>";var j0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M421.84 37.37a25.86 25.86 0 00-22.6-4.46L199.92 86.49A32.3 32.3 0 00176 118v226c0 6.74-4.36 12.56-11.11 14.83l-.12.05-52 18C92.88 383.53 80 402 80 423.91a55.54 55.54 0 0023.23 45.63A54.78 54.78 0 00135.34 480a55.82 55.82 0 0017.75-2.93l.38-.13 21.84-7.94A47.84 47.84 0 00208 423.91v-212c0-7.29 4.77-13.21 12.16-15.07l.21-.06L395 150.14a4 4 0 015 3.86v141.93c0 6.75-4.25 12.38-11.11 14.68l-.25.09-50.89 18.11A49.09 49.09 0 00304 375.92a55.67 55.67 0 0023.23 45.8 54.63 54.63 0 0049.88 7.35l.36-.12 21.84-7.95A47.83 47.83 0 00432 375.92V58a25.74 25.74 0 00-10.16-20.63z'/></svg>";var b1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M208 432h-48a16 16 0 01-16-16V96a16 16 0 0116-16h48a16 16 0 0116 16v320a16 16 0 01-16 16zM352 432h-48a16 16 0 01-16-16V96a16 16 0 0116-16h48a16 16 0 0116 16v320a16 16 0 01-16 16z'/></svg>";var H1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z'/></svg>";var O0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M112 64a16 16 0 0116 16v136.43L360.77 77.11a35.13 35.13 0 0135.77-.44c12 6.8 19.46 20 19.46 34.33v290c0 14.37-7.46 27.53-19.46 34.33a35.14 35.14 0 01-35.77-.45L128 295.57V432a16 16 0 01-32 0V80a16 16 0 0116-16z'/></svg>";var D0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M400 64a16 16 0 00-16 16v136.43L151.23 77.11a35.13 35.13 0 00-35.77-.44C103.46 83.47 96 96.63 96 111v290c0 14.37 7.46 27.53 19.46 34.33a35.14 35.14 0 0035.77-.45L384 295.57V432a16 16 0 0032 0V80a16 16 0 00-16-16z'/></svg>";var j1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M432 272a48.09 48.09 0 00-45.25 32h-39.22l-28.35-85.06a16 16 0 00-30.56.66l-44.51 155.76-52.33-314a16 16 0 00-31.3-1.25L99.51 304H48a16 16 0 000 32h64a16 16 0 0015.52-12.12l45.34-181.37 51.36 308.12A16 16 0 00239.1 464h.91a16 16 0 0015.37-11.6l49.8-174.28 15.64 46.94A16 16 0 00336 336h50.75A48 48 0 10432 272z'/></svg>";var O1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M320 146s24.36-12-64-12a160 160 0 10160 160' stroke-linecap='round' stroke-miterlimit='10' class='ionicon-fill-none ionicon-stroke-width'/><path stroke-linecap='round' stroke-linejoin='round' d='M256 58l80 80-80 80' class='ionicon-fill-none ionicon-stroke-width'/></svg>";var D1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><circle cx='256' cy='256' r='48'/><path d='M470.39 300l-.47-.38-31.56-24.75a16.11 16.11 0 01-6.1-13.33v-11.56a16 16 0 016.11-13.22L469.92 212l.47-.38a26.68 26.68 0 005.9-34.06l-42.71-73.9a1.59 1.59 0 01-.13-.22A26.86 26.86 0 00401 92.14l-.35.13-37.1 14.93a15.94 15.94 0 01-14.47-1.29q-4.92-3.1-10-5.86a15.94 15.94 0 01-8.19-11.82l-5.59-39.59-.12-.72A27.22 27.22 0 00298.76 26h-85.52a26.92 26.92 0 00-26.45 22.39l-.09.56-5.57 39.67a16 16 0 01-8.13 11.82 175.21 175.21 0 00-10 5.82 15.92 15.92 0 01-14.43 1.27l-37.13-15-.35-.14a26.87 26.87 0 00-32.48 11.34l-.13.22-42.77 73.95a26.71 26.71 0 005.9 34.1l.47.38 31.56 24.75a16.11 16.11 0 016.1 13.33v11.56a16 16 0 01-6.11 13.22L42.08 300l-.47.38a26.68 26.68 0 00-5.9 34.06l42.71 73.9a1.59 1.59 0 01.13.22 26.86 26.86 0 0032.45 11.3l.35-.13 37.07-14.93a15.94 15.94 0 0114.47 1.29q4.92 3.11 10 5.86a15.94 15.94 0 018.19 11.82l5.56 39.59.12.72A27.22 27.22 0 00213.24 486h85.52a26.92 26.92 0 0026.45-22.39l.09-.56 5.57-39.67a16 16 0 018.18-11.82c3.42-1.84 6.76-3.79 10-5.82a15.92 15.92 0 0114.43-1.27l37.13 14.95.35.14a26.85 26.85 0 0032.48-11.34 2.53 2.53 0 01.13-.22l42.71-73.89a26.7 26.7 0 00-5.89-34.11zm-134.48-40.24a80 80 0 11-83.66-83.67 80.21 80.21 0 0183.66 83.67z'/></svg>";var T1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M392 432H120a40 40 0 01-40-40V120a40 40 0 0140-40h272a40 40 0 0140 40v272a40 40 0 01-40 40z'/></svg>";var P1="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M256 48C141.13 48 48 141.13 48 256s93.13 208 208 208 208-93.13 208-208S370.87 48 256 48zm96 240h-96a16 16 0 01-16-16V128a16 16 0 0132 0v128h80a16 16 0 010 32z'/></svg>";var T0="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' class='ionicon' viewBox='0 0 512 512'><path d='M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z'/><path d='M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z'/><path d='M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z'/></svg>";var U1,Z0=function(){if(typeof window>"u")return new Map;if(!U1){var n=window;n.Ionicons=n.Ionicons||{},U1=n.Ionicons.map=n.Ionicons.map||new Map}return U1},n1=function(n){Object.keys(n).forEach(function(l){P0(l,n[l]);var t=l.replace(/([a-z0-9]|(?=[A-Z]))([A-Z0-9])/g,"$1-$2").toLowerCase();l!==t&&P0(t,n[l])})},P0=function(n,l){var t=Z0(),o=t.get(n);o===void 0?t.set(n,l):o!==l&&console.warn('[Ionicons Warning]: Multiple icons were mapped to name "'.concat(n,'". Ensure that multiple icons are not mapped to the same icon name.'))};var a1=function(n){return n.Unimplemented="UNIMPLEMENTED",n.Unavailable="UNAVAILABLE",n}(a1||{}),e1=class extends Error{constructor(l,t,o){super(l),this.message=l,this.code=t,this.data=o}},G0=n=>{var l,t;return n!=null&&n.androidBridge?"android":!((t=(l=n==null?void 0:n.webkit)===null||l===void 0?void 0:l.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},K0=n=>{let l=n.CapacitorCustomPlatform||null,t=n.Capacitor||{},o=t.Plugins=t.Plugins||{},i=()=>l!==null?l.name:G0(n),e=()=>i()!=="web",v=L=>{let A=B.get(L);return!!(A!=null&&A.platforms.has(i())||h(L))},h=L=>{var A;return(A=t.PluginHeaders)===null||A===void 0?void 0:A.find(R=>R.name===L)},M=L=>n.console.error(L),B=new Map,S=(L,A={})=>{let R=B.get(L);if(R)return console.warn(`Capacitor plugin "${L}" already registered. Cannot register plugins twice.`),R.proxy;let E=i(),q=h(L),T,I1=()=>d(null,null,function*(){return!T&&E in A?T=typeof A[E]=="function"?T=yield A[E]():T=A[E]:l!==null&&!T&&"web"in A&&(T=typeof A.web=="function"?T=yield A.web():T=A.web),T}),R1=(O,D)=>{var I,W;if(q){let $=q==null?void 0:q.methods.find(F=>D===F.name);if($)return $.rtype==="promise"?F=>t.nativePromise(L,D.toString(),F):(F,s1)=>t.nativeCallback(L,D.toString(),F,s1);if(O)return(I=O[D])===null||I===void 0?void 0:I.bind(O)}else{if(O)return(W=O[D])===null||W===void 0?void 0:W.bind(O);throw new e1(`"${L}" plugin is not implemented on ${E}`,a1.Unimplemented)}},q1=O=>{let D,I=(...W)=>{let $=I1().then(F=>{let s1=R1(F,O);if(s1){let l1=s1(...W);return D=l1==null?void 0:l1.remove,l1}else throw new e1(`"${L}.${O}()" is not implemented on ${E}`,a1.Unimplemented)});return O==="addListener"&&($.remove=()=>d(null,null,function*(){return D()})),$};return I.toString=()=>`${O.toString()}() { [capacitor code] }`,Object.defineProperty(I,"name",{value:O,writable:!1,configurable:!1}),I},Q1=q1("addListener"),X1=q1("removeListener"),N0=(O,D)=>{let I=Q1({eventName:O},D),W=()=>d(null,null,function*(){let F=yield I;X1({eventName:O,callbackId:F},D)}),$=new Promise(F=>I.then(()=>F({remove:W})));return $.remove=()=>d(null,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield W()}),$},W1=new Proxy({},{get(O,D){switch(D){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return q?N0:Q1;case"removeListener":return X1;default:return q1(D)}}});return o[L]=W1,B.set(L,{name:L,proxy:W1,platforms:new Set([...Object.keys(A),...q?[E]:[]])}),W1};return t.convertFileSrc||(t.convertFileSrc=L=>L),t.getPlatform=i,t.handleError=M,t.isNativePlatform=e,t.isPluginAvailable=v,t.registerPlugin=S,t.Exception=e1,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},Q0=n=>n.Capacitor=K0(n),N1=Q0(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),E1=N1.registerPlugin,G=class{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(l,t){let o=!1;this.listeners[l]||(this.listeners[l]=[],o=!0),this.listeners[l].push(t);let e=this.windowListeners[l];e&&!e.registered&&this.addWindowListener(e),o&&this.sendRetainedArgumentsForEvent(l);let v=()=>d(this,null,function*(){return this.removeListener(l,t)});return Promise.resolve({remove:v})}removeAllListeners(){return d(this,null,function*(){this.listeners={};for(let l in this.windowListeners)this.removeWindowListener(this.windowListeners[l]);this.windowListeners={}})}notifyListeners(l,t,o){let i=this.listeners[l];if(!i){if(o){let e=this.retainedEventArguments[l];e||(e=[]),e.push(t),this.retainedEventArguments[l]=e}return}i.forEach(e=>e(t))}hasListeners(l){return!!this.listeners[l].length}registerWindowListener(l,t){this.windowListeners[t]={registered:!1,windowEventName:l,pluginEventName:t,handler:o=>{this.notifyListeners(t,o)}}}unimplemented(l="not implemented"){return new N1.Exception(l,a1.Unimplemented)}unavailable(l="not available"){return new N1.Exception(l,a1.Unavailable)}removeListener(l,t){return d(this,null,function*(){let o=this.listeners[l];if(!o)return;let i=o.indexOf(t);this.listeners[l].splice(i,1),this.listeners[l].length||this.removeWindowListener(this.windowListeners[l])})}addWindowListener(l){window.addEventListener(l.windowEventName,l.handler),l.registered=!0}removeWindowListener(l){l&&(window.removeEventListener(l.windowEventName,l.handler),l.registered=!1)}sendRetainedArgumentsForEvent(l){let t=this.retainedEventArguments[l];t&&(delete this.retainedEventArguments[l],t.forEach(o=>{this.notifyListeners(l,o)}))}};var E0=n=>encodeURIComponent(n).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),F0=n=>n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),Z1=class extends G{getCookies(){return d(this,null,function*(){let l=document.cookie,t={};return l.split(";").forEach(o=>{if(o.length<=0)return;let[i,e]=o.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=F0(i).trim(),e=F0(e).trim(),t[i]=e}),t})}setCookie(l){return d(this,null,function*(){try{let t=E0(l.key),o=E0(l.value),i=`; expires=${(l.expires||"").replace("expires=","")}`,e=(l.path||"/").replace("path=",""),v=l.url!=null&&l.url.length>0?`domain=${l.url}`:"";document.cookie=`${t}=${o||""}${i}; path=${e}; ${v};`}catch(t){return Promise.reject(t)}})}deleteCookie(l){return d(this,null,function*(){try{document.cookie=`${l.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}})}clearCookies(){return d(this,null,function*(){try{let l=document.cookie.split(";")||[];for(let t of l)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(l){return Promise.reject(l)}})}clearAllCookies(){return d(this,null,function*(){try{yield this.clearCookies()}catch(l){return Promise.reject(l)}})}},O4=E1("CapacitorCookies",{web:()=>new Z1}),X0=n=>d(null,null,function*(){return new Promise((l,t)=>{let o=new FileReader;o.onload=()=>{let i=o.result;l(i.indexOf(",")>=0?i.split(",")[1]:i)},o.onerror=i=>t(i),o.readAsDataURL(n)})}),Y0=(n={})=>{let l=Object.keys(n);return Object.keys(n).map(i=>i.toLocaleLowerCase()).reduce((i,e,v)=>(i[e]=n[l[v]],i),{})},J0=(n,l=!0)=>n?Object.entries(n).reduce((o,i)=>{let[e,v]=i,h,M;return Array.isArray(v)?(M="",v.forEach(B=>{h=l?encodeURIComponent(B):B,M+=`${e}=${h}&`}),M.slice(0,-1)):(h=l?encodeURIComponent(v):v,M=`${e}=${h}`),`${o}&${M}`},"").substr(1):null,o2=(n,l={})=>{let t=Object.assign({method:n.method||"GET",headers:n.headers},l),i=Y0(n.headers)["content-type"]||"";if(typeof n.data=="string")t.body=n.data;else if(i.includes("application/x-www-form-urlencoded")){let e=new URLSearchParams;for(let[v,h]of Object.entries(n.data||{}))e.set(v,h);t.body=e.toString()}else if(i.includes("multipart/form-data")||n.data instanceof FormData){let e=new FormData;if(n.data instanceof FormData)n.data.forEach((h,M)=>{e.append(M,h)});else for(let h of Object.keys(n.data))e.append(h,n.data[h]);t.body=e;let v=new Headers(t.headers);v.delete("content-type"),t.headers=v}else(i.includes("application/json")||typeof n.data=="object")&&(t.body=JSON.stringify(n.data));return t},G1=class extends G{request(l){return d(this,null,function*(){let t=o2(l,l.webFetchExtra),o=J0(l.params,l.shouldEncodeUrlParams),i=o?`${l.url}?${o}`:l.url,e=yield fetch(i,t),v=e.headers.get("content-type")||"",{responseType:h="text"}=e.ok?l:{};v.includes("application/json")&&(h="json");let M,B;switch(h){case"arraybuffer":case"blob":B=yield e.blob(),M=yield X0(B);break;case"json":M=yield e.json();break;case"document":case"text":default:M=yield e.text()}let S={};return e.headers.forEach((L,A)=>{S[A]=L}),{data:M,headers:S,status:e.status,url:e.url}})}get(l){return d(this,null,function*(){return this.request(Object.assign(Object.assign({},l),{method:"GET"}))})}post(l){return d(this,null,function*(){return this.request(Object.assign(Object.assign({},l),{method:"POST"}))})}put(l){return d(this,null,function*(){return this.request(Object.assign(Object.assign({},l),{method:"PUT"}))})}patch(l){return d(this,null,function*(){return this.request(Object.assign(Object.assign({},l),{method:"PATCH"}))})}delete(l){return d(this,null,function*(){return this.request(Object.assign(Object.assign({},l),{method:"DELETE"}))})}},D4=E1("CapacitorHttp",{web:()=>new G1});var _=E1("CapacitorAudioEngine",{web:()=>Promise.resolve().then(function(){return t2}).then(n=>new n.CapacitorAudioEngineWeb)}),t2=Object.freeze({__proto__:null,CapacitorAudioEngineWeb:class extends G{echo(n){return d(this,null,function*(){return console.log("ECHO",n),n})}checkPermission(){return d(this,null,function*(){return console.warn("checkPermission is not supported on web platform. For web implementation, consider using navigator.permissions.query API directly."),{granted:!1}})}requestPermission(){return d(this,null,function*(){return console.warn("requestPermission is not supported on web platform. For web implementation, consider using navigator.mediaDevices.getUserMedia API directly."),{granted:!1}})}startRecording(n){return d(this,null,function*(){throw console.warn("startRecording is not supported on web platform. For web implementation, consider using MediaRecorder API directly."),new Error("startRecording is not supported on web platform")})}stopRecording(){return d(this,null,function*(){throw console.warn("stopRecording is not supported on web platform. For web implementation, consider using MediaRecorder API directly."),new Error("stopRecording is not supported on web platform")})}pauseRecording(){return d(this,null,function*(){throw console.warn("pauseRecording is not supported on web platform. For web implementation, consider using MediaRecorder API directly."),new Error("pauseRecording is not supported on web platform")})}resumeRecording(){return d(this,null,function*(){throw console.warn("resumeRecording is not supported on web platform. For web implementation, consider using MediaRecorder API directly."),new Error("resumeRecording is not supported on web platform")})}getDuration(){return d(this,null,function*(){return console.warn("getDuration is not supported on web platform. For web implementation, consider using MediaRecorder API directly."),{duration:0}})}getStatus(){return d(this,null,function*(){return console.warn("getStatus is not supported on web platform. For web implementation, consider using MediaRecorder API directly."),{status:"idle",isRecording:!1,duration:0}})}trimAudio(o){return d(this,arguments,function*({uri:n,start:l,end:t}){throw console.warn(`trimAudio is not supported on web platform. Attempted to trim file: ${n} from ${l}s to ${t}s. For web implementation, consider using Web Audio API directly.`),new Error("trimAudio is not supported on web platform")})}addListener(n,l){return d(this,null,function*(){return console.warn(`${n} event is not supported on web platform. Callback will not be invoked. For web implementation, consider using MediaRecorder events directly.`),{remove:()=>Promise.resolve()}})}isMicrophoneBusy(){return d(this,null,function*(){throw console.warn("isMicrophoneBusy is not supported on web platform."),new Error("isMicrophoneBusy is not supported on web platform")})}getAvailableMicrophones(){return d(this,null,function*(){throw console.warn("getAvailableMicrophones is not supported on web platform."),new Error("getAvailableMicrophones is not supported on web platform")})}switchMicrophone(n){return d(this,null,function*(){throw console.warn(`switchMicrophone is not supported on web platform. Attempted to switch to microphone ID: ${n.microphoneId}`),new Error("switchMicrophone is not supported on web platform")})}removeAllListeners(){return d(this,null,function*(){console.warn("removeAllListeners is not supported on web platform.")})}configureWaveform(n){return d(this,null,function*(){return console.warn("configureWaveform is not supported on web platform. Waveform data is not available for web recordings. Consider using MediaRecorder events and manual amplitude analysis."),{success:!1,numberOfBars:(n==null?void 0:n.numberOfBars)||32,debounceInSeconds:(n==null?void 0:n.debounceInSeconds)||1}})}destroyWaveform(){return d(this,null,function*(){console.warn("destroyWaveform is not supported on web platform. No waveform resources to clean up.")})}configureWaveformSpeechDetection(n){return d(this,null,function*(){var l;let t=(l=n==null?void 0:n.enabled)!==null&&l!==void 0&&l;throw console.warn(`configureWaveformSpeechDetection is not supported on web platform. Attempted to configure speech detection enabled: ${t}.`),new Error("configureWaveformSpeechDetection is not supported on web platform")})}configureAdvancedVAD(n){return d(this,null,function*(){var l,t;let o=(l=n==null?void 0:n.enabled)!==null&&l!==void 0&&l,i=(t=n==null?void 0:n.windowSize)!==null&&t!==void 0?t:5;throw console.warn(`configureAdvancedVAD is not supported on web platform. Attempted to configure VAD enabled: ${o}, windowSize: ${i}.`),new Error("configureAdvancedVAD is not supported on web platform")})}preloadTracks(n){return d(this,null,function*(){return console.warn("preloadTracks is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),{tracks:n.tracks.map(l=>({url:l,loaded:!1}))}})}playAudio(){return d(this,null,function*(){throw console.warn("playAudio is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("playAudio is not supported on web platform")})}pauseAudio(){return d(this,null,function*(){throw console.warn("pauseAudio is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("pauseAudio is not supported on web platform")})}resumeAudio(){return d(this,null,function*(){throw console.warn("resumeAudio is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("resumeAudio is not supported on web platform")})}stopAudio(){return d(this,null,function*(){throw console.warn("stopAudio is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("stopAudio is not supported on web platform")})}seekAudio(n){return d(this,null,function*(){throw console.warn("seekAudio is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("seekAudio is not supported on web platform")})}skipToNext(){return d(this,null,function*(){throw console.warn("skipToNext is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("skipToNext is not supported on web platform")})}skipToPrevious(){return d(this,null,function*(){throw console.warn("skipToPrevious is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("skipToPrevious is not supported on web platform")})}skipToIndex(n){return d(this,null,function*(){throw console.warn("skipToIndex is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("skipToIndex is not supported on web platform")})}getPlaybackInfo(){return d(this,null,function*(){throw console.warn("getPlaybackInfo is not supported on web platform. For web implementation, consider using HTML5 Audio API directly."),new Error("getPlaybackInfo is not supported on web platform")})}openSettings(){return d(this,null,function*(){console.warn("openSettings is not fully supported on web platform. Showing alert with instructions."),alert(`To manage app permissions:

1. Click the lock icon in your browser's address bar
2. Select "Site settings" or "Permissions"
3. Adjust microphone and other permissions as needed

Or access browser settings directly through the browser menu.`)})}}});var I0=(()=>{let l=class l{constructor(){this.buffer=[],this.recordingStartTime=0,this.frameCount=0,this.peakDetectionWindow=5,this.lastPeakTime=0,this.minPeakDistance=100,this._isActive=k(!1),this._statistics=k({totalPoints:0,recordingDurationMinutes:0,bufferSizeKB:0,compressionRatio:1,peakCount:0,memoryEfficiency:0}),this._currentZoom=k("medium"),this._displayData=k([]),this.config={maxTotalPoints:400,recentDataMinutes:5,recentDataPoints:150,peakThreshold:.15,resolutionLevels:[{timeRangeMinutes:5,maxPoints:150,compressionMethod:"rms"},{timeRangeMinutes:20,maxPoints:150,compressionMethod:"peak"},{timeRangeMinutes:60,maxPoints:120,compressionMethod:"rms"},{timeRangeMinutes:120,maxPoints:80,compressionMethod:"max"}],zoomLevels:[{name:"recent",durationMinutes:1,maxPoints:60,description:"Last 1 minute"},{name:"short",durationMinutes:5,maxPoints:200,description:"Last 5 minutes"},{name:"medium",durationMinutes:20,maxPoints:300,description:"Last 20 minutes"},{name:"full",durationMinutes:120,maxPoints:400,description:"Full recording"}]},this.isActive=this._isActive.asReadonly(),this.statistics=this._statistics.asReadonly(),this.currentZoom=this._currentZoom.asReadonly(),this.displayData=this._displayData.asReadonly(),this.availableZooms=k(this.config.zoomLevels),this.recordingDuration=b(()=>this.statistics().recordingDurationMinutes),this.compressionRatio=b(()=>this.statistics().compressionRatio),this.memoryEfficiency=b(()=>this.statistics().memoryEfficiency)}startRecording(){this.reset(),this.recordingStartTime=Date.now(),this._isActive.set(!0),console.log("[WaveformBufferService] Recording started")}stopRecording(){this._isActive.set(!1),this.updateStatistics(),console.log("[WaveformBufferService] Recording stopped")}addLevel(o){if(!this._isActive())return;this.frameCount++;let i=Date.now(),e={level:o,timestamp:i};this.detectAndMarkPeak(e),this.buffer.push(e),this.manageBufferSize(),this.updateDisplayData(),this.frameCount%100===0&&this.updateStatistics()}setZoom(o){this._currentZoom.set(typeof o=="string"?o:"custom"),this.updateDisplayData(o)}getDisplayData(o,i){let e=this.getZoomConfig(o||this._currentZoom(),i),v=e.durationMinutes*60*1e3,h=Date.now()-v,M=this.buffer.filter(B=>B.timestamp>=h);return M.length===0?[]:M.length<=e.maxPoints?M.map(B=>B.level):this.downsampleData(M,e.maxPoints)}updateConfig(o){this.config=P(P({},this.config),o),this.availableZooms.set(this.config.zoomLevels),console.log("[WaveformBufferService] Configuration updated")}reset(){this.buffer=[],this.frameCount=0,this.recordingStartTime=Date.now(),this.lastPeakTime=0,this._displayData.set([]),this._statistics.set({totalPoints:0,recordingDurationMinutes:0,bufferSizeKB:0,compressionRatio:1,peakCount:0,memoryEfficiency:0}),console.log("[WaveformBufferService] Buffer reset")}getCurrentStatistics(){return this.statistics()}detectAndMarkPeak(o){let{level:i,timestamp:e}=o;if(i<this.config.peakThreshold||e-this.lastPeakTime<this.minPeakDistance)return;this.buffer.slice(-this.peakDetectionWindow).every(M=>i>=M.level)&&(o.isPeak=!0,this.lastPeakTime=e)}manageBufferSize(){this.buffer.length<=this.config.maxTotalPoints||(this.applyProgressiveCompression(),this.buffer.length>this.config.maxTotalPoints&&(this.buffer=this.buffer.slice(-this.config.maxTotalPoints)))}applyProgressiveCompression(){let o=Date.now(),i=o-this.config.recentDataMinutes*60*1e3,e=this.buffer.filter(B=>B.timestamp>=i),v=this.buffer.filter(B=>B.timestamp<i);if(v.length===0)return;let h=this.compressDataByTimeRanges(v,o),M=e.length>this.config.recentDataPoints?e.slice(-this.config.recentDataPoints):e;this.buffer=[...h,...M]}compressDataByTimeRanges(o,i){var v;let e=[];for(let h of this.config.resolutionLevels){let M=i-h.timeRangeMinutes*60*1e3,B=h===this.config.resolutionLevels[0]?i:i-(((v=this.config.resolutionLevels[this.config.resolutionLevels.indexOf(h)-1])==null?void 0:v.timeRangeMinutes)||0)*60*1e3,S=o.filter(A=>A.timestamp>=M&&A.timestamp<B);if(S.length===0)continue;let L=this.compressDataRange(S,h);e.push(...L)}return e.sort((h,M)=>h.timestamp-M.timestamp)}compressDataRange(o,i){if(o.length<=i.maxPoints)return o;let e=Math.ceil(o.length/i.maxPoints),v=[];for(let h=0;h<o.length;h+=e){let M=o.slice(h,h+e),B=this.compressChunk(M,i.compressionMethod);v.push(B)}return v}compressChunk(o,i){if(o.length===0)return{level:0,timestamp:Date.now()};if(o.length===1)return o[0];let e=Math.floor(o.length/2),v=o[e].timestamp,h,M=!1;switch(i){case"rms":let B=o.reduce((S,L)=>S+L.level*L.level,0);h=Math.sqrt(B/o.length);break;case"peak":case"max":h=Math.max(...o.map(S=>S.level)),M=o.some(S=>S.isPeak);break;case"average":default:h=o.reduce((S,L)=>S+L.level,0)/o.length;break}return{level:h,timestamp:v,isPeak:M}}downsampleData(o,i){if(o.length<=i)return o.map(h=>h.level);let e=o.length/i,v=[];for(let h=0;h<i;h++){let M=Math.floor(h*e),B=Math.floor((h+1)*e),S=o.slice(M,B);if(S.length===0)continue;let L=Math.sqrt(S.reduce((A,R)=>A+R.level*R.level,0)/S.length);v.push(L)}return v}updateDisplayData(o){let i=this.getDisplayData(o);this._displayData.set(i)}updateStatistics(){let o=Date.now()-this.recordingStartTime,i=o/(60*1e3),e=Math.floor(o/50),v=e>0?e/this.buffer.length:1,h=this.buffer.filter(L=>L.isPeak).length,B=this.buffer.length*16/1024,S=e>0?(1-this.buffer.length/e)*100:0;this._statistics.set({totalPoints:this.buffer.length,recordingDurationMinutes:i,bufferSizeKB:Math.round(B*100)/100,compressionRatio:Math.round(v*100)/100,peakCount:h,memoryEfficiency:Math.round(S*100)/100})}getZoomConfig(o,i){if(typeof o=="number")return{durationMinutes:o,maxPoints:i||this.config.maxTotalPoints};let e=this.config.zoomLevels.find(v=>v.name===o);return e?{durationMinutes:e.durationMinutes,maxPoints:i||e.maxPoints}:(console.warn(`[WaveformBufferService] Unknown zoom level: ${o}, using 'medium'`),{durationMinutes:20,maxPoints:i||300})}};l.\u0275fac=function(i){return new(i||l)},l.\u0275prov=Y1({token:l,factory:l.\u0275fac,providedIn:"root"});let n=l;return n})();var i2=["canvas"];function n2(n,l){if(n&1&&(X(0,"div",3)(1,"span",5),c(2),Y(),X(3,"span",6),c(4),Y()()),n&2){let t=g();r(2),y(t.startLabel),r(2),y(t.endLabel)}}function e2(n,l){if(n&1&&(X(0,"div",4)(1,"small"),c(2),Y()()),n&2){let t=g();r(2),l0(" Points: ",t.levels().length," | Max: ",t.maxLevel().toFixed(3)," | Avg: ",t.avgLevel().toFixed(3)," ")}}var R0=(()=>{let l=class l{constructor(){this.data=[],this.width=400,this.height=100,this.barWidth=2,this.barGap=1,this.color="#3b82f6",this.backgroundColor="#f8f9fa",this.peakColor="#ef4444",this.showPeaks=!0,this.peakThreshold=.7,this.animated=!0,this.cssClass="",this.borderRadius=4,this.showLabels=!1,this.startLabel="",this.endLabel="",this.showStatistics=!1,this.levels=k([]),this.previousLevels=k([]),this.animationProgress=k(1),this.maxLevel=b(()=>{let o=this.levels();return o.length>0?Math.max(...o):0}),this.avgLevel=b(()=>{let o=this.levels();return o.length>0?o.reduce((i,e)=>i+e,0)/o.length:0}),this.animationId=null,c0(()=>{var e;let o=this.levels(),i=this.animationProgress();(e=this.canvas)!=null&&e.nativeElement&&this.drawWaveform(o,i)})}ngAfterViewInit(){this.drawWaveform(this.levels(),1)}ngOnChanges(o){o.data&&this.data&&this.updateLevels(this.data)}updateLevels(o){this.animated&&(this.previousLevels.set(this.levels()),this.startAnimation()),this.levels.set([...o])}startAnimation(){if(!this.animated){this.animationProgress.set(1);return}this.animationId&&cancelAnimationFrame(this.animationId),this.animationProgress.set(0);let o=()=>{this.animationProgress.update(i=>{let e=Math.min(1,i+.1);return e<1?this.animationId=requestAnimationFrame(o):this.animationId=null,e})};this.animationId=requestAnimationFrame(o)}drawWaveform(o,i){var S;let e=(S=this.canvas)==null?void 0:S.nativeElement;if(!e)return;let v=e.getContext("2d");if(!v||(e.width=this.width,e.height=this.height,v.fillStyle=this.backgroundColor,v.fillRect(0,0,this.width,this.height),o.length===0))return;let h=Math.floor(this.width/(this.barWidth+this.barGap)),M=o.slice(-h),B=this.previousLevels().slice(-h);M.forEach((L,A)=>{let R=A*(this.barWidth+this.barGap),E=Math.max(0,Math.min(1,L)),q=E;this.animated&&B[A]!==void 0&&i<1&&(q=B[A]+(E-B[A])*i);let T=q*this.height,I1=(this.height-T)/2,R1=this.showPeaks&&E>this.peakThreshold;v.fillStyle=R1?this.peakColor:this.color,this.drawRoundedRect(v,R,I1,this.barWidth,T,this.barWidth/2)})}drawRoundedRect(o,i,e,v,h,M){o.beginPath(),o.roundRect(i,e,v,h,M),o.fill()}redraw(){this.drawWaveform(this.levels(),this.animationProgress())}exportAsImage(o="png"){var e;let i=(e=this.canvas)==null?void 0:e.nativeElement;return i?i.toDataURL(`image/${o}`):""}getCurrentData(){return[...this.levels()]}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=N({type:l,selectors:[["app-waveform-visualizer"]],viewQuery:function(i,e){if(i&1&&n0(i2,7),i&2){let v;e0(v=a0())&&(e.canvas=v.first)}},inputs:{data:"data",width:"width",height:"height",barWidth:"barWidth",barGap:"barGap",color:"color",backgroundColor:"backgroundColor",peakColor:"peakColor",showPeaks:"showPeaks",peakThreshold:"peakThreshold",animated:"animated",cssClass:"cssClass",borderRadius:"borderRadius",showLabels:"showLabels",startLabel:"startLabel",endLabel:"endLabel",showStatistics:"showStatistics"},features:[J1],decls:5,vars:14,consts:[["canvas",""],[1,"waveform-container"],[3,"width","height"],[1,"waveform-labels"],[1,"waveform-stats"],[1,"label-start"],[1,"label-end"]],template:function(i,e){i&1&&(X(0,"div",1),t0(1,"canvas",2,0),u(3,n2,5,2,"div",3),u(4,e2,3,3,"div",4),Y()),i&2&&(J("width",e.width,"px")("height",e.height,"px"),r(),s0(e.cssClass),J("display","block")("border-radius",e.borderRadius,"px"),i0("width",e.width)("height",e.height),r(2),f(e.showLabels?3:-1),r(),f(e.showStatistics?4:-1))},dependencies:[g1],styles:[".waveform-container[_ngcontent-%COMP%]{position:relative;display:inline-block}canvas[_ngcontent-%COMP%]{display:block;background:var(--waveform-bg, #f8f9fa);border:1px solid var(--waveform-border, #dee2e6)}.waveform-labels[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:4px;font-size:10px;color:var(--waveform-label-color, #6c757d)}.waveform-stats[_ngcontent-%COMP%]{margin-top:4px;text-align:center;font-size:10px;color:var(--waveform-stats-color, #6c757d);font-family:monospace}"],changeDetection:0});let n=l;return n})();var q0=(n,l)=>l.name;function a2(n,l){n&1&&(s(0,"ion-chip",1),m(1,"ion-icon",27),s(2,"ion-label"),c(3,"Recording"),a()())}function s2(n,l){if(n&1&&(s(0,"ion-select-option",12),c(1),a()),n&2){let t=l.$implicit;z("value",t.name),r(),C(" ",t.description," ")}}function l2(n,l){if(n&1){let t=V();s(0,"ion-button",28),w("click",function(){let i=p(t).$implicit,e=g();return x(e.setZoom(i.name))}),c(1),a()}if(n&2){let t=l.$implicit,o=g();z("color",o.bufferService.currentZoom()===t.name?"primary":"medium"),r(),C(" ",t.label," ")}}function c2(n,l){if(n&1&&(s(0,"ion-note",26),m(1,"ion-icon",29),c(2),a()),n&2){let t=g();r(2),C(" Optimal performance: ",t.bufferService.displayData().length," points displayed efficiently ")}}var W0=(()=>{let l=class l{constructor(){this.bufferService=K(I0),this.settings=k({preset:"long",maxPoints:400,compressionEnabled:!0,peakDetection:!0,animationEnabled:!0,autoZoom:!1}),this.waveformSettings=k({visualizationWidth:400,visualizationHeight:120,primaryColor:"#3b82f6",peakColor:"#ef4444",backgroundColor:"#f8f9fa"}),this.quickZoomLevels=[{name:"recent",label:"1m"},{name:"short",label:"5m"},{name:"medium",label:"20m"},{name:"full",label:"All"}],this.simulationTimer=null,n1({play:H1,pause:b1,stop:T1,refresh:O1,settings:D1,analytics:S1,time:P1,pulse:j1,checkmarkCircle:A1})}ngOnInit(){this.bufferService.updateConfig({maxTotalPoints:this.settings().maxPoints,recentDataMinutes:5,recentDataPoints:150,resolutionLevels:[{timeRangeMinutes:5,maxPoints:150,compressionMethod:"rms"},{timeRangeMinutes:20,maxPoints:150,compressionMethod:"peak"},{timeRangeMinutes:60,maxPoints:120,compressionMethod:"rms"},{timeRangeMinutes:120,maxPoints:80,compressionMethod:"max"}]})}ngOnDestroy(){this.simulationTimer&&clearInterval(this.simulationTimer)}toggleRecording(){this.bufferService.isActive()?this.stopRecording():this.startRecording()}startRecording(){this.bufferService.startRecording(),this.simulationTimer=setInterval(()=>{let o=Math.random()*.4+.1;Math.random()<.15&&(o=Math.random()*.5+.5),Math.random()<.05&&(o=Math.random()*.05),this.bufferService.addLevel(o)},50)}stopRecording(){this.bufferService.stopRecording(),this.simulationTimer&&(clearInterval(this.simulationTimer),this.simulationTimer=null)}resetBuffer(){this.stopRecording(),this.bufferService.reset()}setZoom(o){this.bufferService.setZoom(o)}onZoomChange(o){this.bufferService.setZoom(o.detail.value)}updateSettings(){let o=this.settings();this.bufferService.updateConfig({maxTotalPoints:o.maxPoints})}formatDuration(o){return o<1?`${Math.round(o*60)}s`:`${o.toFixed(1)}m`}getStartLabel(){let o=this.bufferService.statistics(),i=this.bufferService.availableZooms().find(v=>v.name===this.bufferService.currentZoom());if(!i)return"";let e=Math.max(0,o.recordingDurationMinutes-i.durationMinutes);return`-${this.formatDuration(i.durationMinutes)}`}getEndLabel(){return"Now"}getCompressionRatio(){let o=this.bufferService.statistics(),i=this.bufferService.displayData().length;if(o.recordingDurationMinutes===0)return 0;let e=this.getExpectedPointsForCurrentZoom();return e>0?Math.round((1-i/e)*100):0}getExpectedPointsForCurrentZoom(){let o=this.bufferService.availableZooms().find(v=>v.name===this.bufferService.currentZoom());if(!o)return 0;let i=this.bufferService.statistics(),e=Math.min(i.recordingDurationMinutes,o.durationMinutes);return Math.floor(e*60*1e3/50)}showPerformanceIndicator(){let o=this.bufferService.displayData().length;return o>0&&o<=500}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=N({type:l,selectors:[["app-intelligent-waveform"]],decls:111,vars:30,consts:[["name","analytics"],["color","success","size","small"],[1,"waveform-section"],[3,"data","width","height","color","peakColor","backgroundColor","animated","showPeaks","showStatistics","showLabels","startLabel","endLabel"],[1,"controls-grid"],["size","12","size-md","4"],[1,"control-section"],["expand","block","fill","solid",3,"click","color"],[3,"name"],["expand","block","fill","outline","color","medium",3,"click"],["name","refresh"],["interface","popover","placeholder","Select zoom level",3,"ionChange","value"],[3,"value"],[1,"zoom-buttons"],["size","small","fill","outline",3,"color"],["lines","none"],[3,"ngModelChange","ngModel"],[1,"ion-margin-start"],["min","100","max","800","step","50","color","primary",3,"ngModelChange","ngModel"],["slot","start"],["slot","end"],[1,"statistics-section"],["size","6","size-md","3"],[1,"stat-card"],[1,"stat-value"],[1,"stat-label"],["color","success"],["name","pulse"],["size","small","fill","outline",3,"click","color"],["name","checkmark-circle"]],template:function(i,e){i&1&&(s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",0),c(4," Intelligent Waveform Buffer "),u(5,a2,4,0,"ion-chip",1),a()(),s(6,"ion-card-content")(7,"div",2),m(8,"app-waveform-visualizer",3),a(),s(9,"ion-grid",4)(10,"ion-row")(11,"ion-col",5)(12,"div",6)(13,"h4"),c(14,"Recording Controls"),a(),s(15,"ion-button",7),w("click",function(){return e.toggleRecording()}),m(16,"ion-icon",8),c(17),a(),s(18,"ion-button",9),w("click",function(){return e.resetBuffer()}),m(19,"ion-icon",10),c(20," Reset Buffer "),a()()(),s(21,"ion-col",5)(22,"div",6)(23,"h4"),c(24,"Zoom Level"),a(),s(25,"ion-select",11),w("ionChange",function(h){return e.onZoomChange(h)}),H(26,s2,2,2,"ion-select-option",12,q0),a(),s(28,"div",13),H(29,l2,2,2,"ion-button",14,q0),a()()(),s(31,"ion-col",5)(32,"div",6)(33,"h4"),c(34,"Settings"),a(),s(35,"ion-item",15)(36,"ion-checkbox",16),i1("ngModelChange",function(h){return t1(e.settings().compressionEnabled,h)||(e.settings().compressionEnabled=h),h}),w("ngModelChange",function(){return e.updateSettings()}),a(),s(37,"ion-label",17),c(38,"Smart Compression"),a()(),s(39,"ion-item",15)(40,"ion-checkbox",16),i1("ngModelChange",function(h){return t1(e.settings().peakDetection,h)||(e.settings().peakDetection=h),h}),w("ngModelChange",function(){return e.updateSettings()}),a(),s(41,"ion-label",17),c(42,"Peak Detection"),a()(),s(43,"ion-item",15)(44,"ion-checkbox",16),i1("ngModelChange",function(h){return t1(e.settings().animationEnabled,h)||(e.settings().animationEnabled=h),h}),w("ngModelChange",function(){return e.updateSettings()}),a(),s(45,"ion-label",17),c(46,"Smooth Animation"),a()(),s(47,"ion-item",15)(48,"ion-label"),c(49,"Max Display Points"),a(),s(50,"ion-range",18),i1("ngModelChange",function(h){return t1(e.settings().maxPoints,h)||(e.settings().maxPoints=h),h}),w("ngModelChange",function(){return e.updateSettings()}),s(51,"ion-label",19),c(52,"100"),a(),s(53,"ion-label",20),c(54,"800"),a()()()()()()(),s(55,"div",21)(56,"h4"),m(57,"ion-icon",0),c(58," Real-time Statistics "),a(),s(59,"ion-grid")(60,"ion-row")(61,"ion-col",22)(62,"div",23)(63,"div",24),c(64),a(),s(65,"div",25),c(66,"Duration"),a()()(),s(67,"ion-col",22)(68,"div",23)(69,"div",24),c(70),a(),s(71,"div",25),c(72,"Data Points"),a()()(),s(73,"ion-col",22)(74,"div",23)(75,"div",24),c(76),a(),s(77,"div",25),c(78,"Compression"),a()()(),s(79,"ion-col",22)(80,"div",23)(81,"div",24),c(82),a(),s(83,"div",25),c(84,"Memory Saved"),a()()()(),s(85,"ion-row")(86,"ion-col",22)(87,"div",23)(88,"div",24),c(89),a(),s(90,"div",25),c(91,"Memory Usage"),a()()(),s(92,"ion-col",22)(93,"div",23)(94,"div",24),c(95),a(),s(96,"div",25),c(97,"Peaks Detected"),a()()(),s(98,"ion-col",22)(99,"div",23)(100,"div",24),c(101),a(),s(102,"div",25),c(103,"Display Points"),a()()(),s(104,"ion-col",22)(105,"div",23)(106,"div",24),c(107),a(),s(108,"div",25),c(109,"UI Efficiency"),a()()()()()(),u(110,c2,3,1,"ion-note",26),a()()),i&2&&(r(5),f(e.bufferService.isActive()?5:-1),r(3),z("data",e.bufferService.displayData())("width",e.waveformSettings().visualizationWidth)("height",e.waveformSettings().visualizationHeight)("color",e.waveformSettings().primaryColor)("peakColor",e.waveformSettings().peakColor)("backgroundColor",e.waveformSettings().backgroundColor)("animated",e.settings().animationEnabled)("showPeaks",e.settings().peakDetection)("showStatistics",!0)("showLabels",!0)("startLabel",e.getStartLabel())("endLabel",e.getEndLabel()),r(7),z("color",e.bufferService.isActive()?"danger":"success"),r(),z("name",e.bufferService.isActive()?"stop":"play"),r(),C(" ",e.bufferService.isActive()?"Stop Recording":"Start Recording"," "),r(8),z("value",e.bufferService.currentZoom()),r(),j(e.bufferService.availableZooms()),r(3),j(e.quickZoomLevels),r(7),o1("ngModel",e.settings().compressionEnabled),r(4),o1("ngModel",e.settings().peakDetection),r(4),o1("ngModel",e.settings().animationEnabled),r(6),o1("ngModel",e.settings().maxPoints),r(14),C(" ",e.formatDuration(e.bufferService.recordingDuration())," "),r(6),C(" ",e.bufferService.statistics().totalPoints.toLocaleString()," "),r(6),C("",e.bufferService.compressionRatio().toFixed(1),"x"),r(6),C("",e.bufferService.memoryEfficiency().toFixed(1),"%"),r(7),C(" ",e.bufferService.statistics().bufferSizeKB.toFixed(1)," KB "),r(6),y(e.bufferService.statistics().peakCount),r(6),y(e.bufferService.displayData().length),r(6),C("",e.getCompressionRatio(),"%"),r(3),f(e.showPerformanceIndicator()?110:-1))},dependencies:[g1,v1,d0,h0,R0,h1,m1,p1,w1,d1,L1,V1,_1,M1,k1,x1,f1,C1,u1,z1,B1,y1],styles:[".waveform-section[_ngcontent-%COMP%]{margin-bottom:20px;text-align:center}.controls-grid[_ngcontent-%COMP%]{margin:20px 0}.control-section[_ngcontent-%COMP%]{padding:16px;border:1px solid var(--ion-color-light);border-radius:8px;margin-bottom:16px}.control-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:14px;font-weight:600;color:var(--ion-color-dark)}.zoom-buttons[_ngcontent-%COMP%]{display:flex;gap:8px;margin-top:12px;flex-wrap:wrap}.statistics-section[_ngcontent-%COMP%]{margin-top:24px;padding:16px;background:var(--ion-color-light);border-radius:8px}.statistics-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;display:flex;align-items:center;gap:8px;font-size:16px;font-weight:600}.stat-card[_ngcontent-%COMP%]{text-align:center;padding:12px;background:#fff;border-radius:8px;margin-bottom:8px}.stat-value[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--ion-color-primary);margin-bottom:4px}.stat-label[_ngcontent-%COMP%]{font-size:12px;color:var(--ion-color-medium);text-transform:uppercase;letter-spacing:.5px}ion-note[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-top:16px;padding:12px;border-radius:8px}"],changeDetection:0});let n=l;return n})();var F1=(n,l)=>l.value,$0=(n,l)=>l.uri,U0=(n,l)=>l.id,r2=(n,l)=>l.url;function g2(n,l){if(n&1){let t=V();s(0,"ion-card",3)(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",4),c(4," Microphone Permission Required "),a()(),s(5,"ion-card-content")(6,"p"),c(7,"This app needs microphone permission to record audio."),a(),s(8,"ion-button",5),w("click",function(){p(t);let i=g();return x(i.requestPermission())}),c(9," Request Permission "),a(),s(10,"ion-note")(11,"p")(12,"small"),c(13,"If permission was denied, you can open app permissions to manually enable microphone access."),a()()()()()}}function v2(n,l){n&1&&(m(0,"ion-icon",7),s(1,"ion-label"),c(2,"Recording"),a())}function d2(n,l){n&1&&(m(0,"ion-icon",29),s(1,"ion-label"),c(2,"Paused"),a())}function h2(n,l){n&1&&(m(0,"ion-icon",30),s(1,"ion-label"),c(2,"Idle"),a())}function w2(n,l){if(n&1&&(s(0,"ion-note"),c(1),a()),n&2){let t=g(3);r(),y(t.formattedDuration())}}function m2(n,l){if(n&1){let t=V();s(0,"ion-col",31)(1,"ion-button",33),w("click",function(){let i=p(t).$implicit,e=g(4);return x(e.updateSampleRate(i.value))}),c(2),a()()}if(n&2){let t=l.$implicit,o=g(4);r(),z("fill",o.recordingOptions().sampleRate===t.value?"solid":"outline")("color",o.recordingOptions().sampleRate===t.value?"primary":"medium"),r(),C(" ",t.label," ")}}function p2(n,l){if(n&1){let t=V();s(0,"ion-col",20)(1,"ion-button",34),w("click",function(){let i=p(t).$implicit,e=g(4);return x(e.updateChannels(i.value))}),c(2),a()()}if(n&2){let t=l.$implicit,o=g(4);r(),z("fill",o.recordingOptions().channels===t.value?"solid":"outline")("color",o.recordingOptions().channels===t.value?"primary":"medium"),r(),C(" ",t.label," ")}}function x2(n,l){if(n&1){let t=V();s(0,"ion-col",31)(1,"ion-button",33),w("click",function(){let i=p(t).$implicit,e=g(4);return x(e.updateBitrate(i.value))}),c(2),a()()}if(n&2){let t=l.$implicit,o=g(4);r(),z("fill",o.recordingOptions().bitrate===t.value?"solid":"outline")("color",o.recordingOptions().bitrate===t.value?"primary":"medium"),r(),C(" ",t.label," ")}}function u2(n,l){if(n&1){let t=V();s(0,"ion-col",35)(1,"ion-button",33),w("click",function(){let i=p(t).$implicit,e=g(5);return x(e.updateMaxDuration(i.value))}),c(2),a()()}if(n&2){let t=l.$implicit,o=g(5);r(),z("fill",o.maxDurationSeconds()===t.value?"solid":"outline")("color",o.maxDurationSeconds()===t.value?"primary":"medium"),r(),C(" ",t.label," ")}}function f2(n,l){if(n&1&&(s(0,"ion-item")(1,"ion-label"),c(2,"Max Duration (seconds)"),a(),s(3,"ion-note"),c(4),a()(),s(5,"ion-item")(6,"ion-grid")(7,"ion-row"),H(8,u2,3,3,"ion-col",35,F1),a()()()),n&2){let t=g(4);r(4),C("",t.maxDurationSeconds(),"s"),r(4),j(t.maxDurationOptions)}}function M2(n,l){if(n&1){let t=V();s(0,"ion-card",28)(1,"ion-card-header")(2,"ion-card-title"),c(3,"Recording Options"),a()(),s(4,"ion-card-content")(5,"ion-item")(6,"ion-label"),c(7,"Sample Rate (Hz)"),a(),s(8,"ion-note"),c(9),a()(),s(10,"ion-item")(11,"ion-grid")(12,"ion-row"),H(13,m2,3,3,"ion-col",31,F1),a()()(),s(15,"ion-item")(16,"ion-label"),c(17,"Channels"),a(),s(18,"ion-note"),c(19),a()(),s(20,"ion-item")(21,"ion-grid")(22,"ion-row"),H(23,p2,3,3,"ion-col",20,F1),a()()(),s(25,"ion-item")(26,"ion-label"),c(27,"Bitrate (bps)"),a(),s(28,"ion-note"),c(29),a()(),s(30,"ion-item")(31,"ion-grid")(32,"ion-row"),H(33,x2,3,3,"ion-col",31,F1),a()()(),s(35,"ion-item")(36,"ion-checkbox",32),w("ionChange",function(i){p(t);let e=g(3);return x(e.isSegmentRollingEnabled.set(i.detail.checked))}),a(),s(37,"ion-label"),c(38,"Enable Segment Rolling"),a()(),u(39,f2,10,1),a()()}if(n&2){let t=g(3);r(9),C("",t.recordingOptions().sampleRate," Hz"),r(4),j(t.sampleRateOptions),r(6),y(t.recordingOptions().channels===1?"Mono":"Stereo"),r(4),j(t.channelOptions),r(6),C("",t.recordingOptions().bitrate/1e3,"k bps"),r(4),j(t.bitrateOptions),r(3),z("checked",t.isSegmentRollingEnabled()),r(3),f(t.isSegmentRollingEnabled()?39:-1)}}function k2(n,l){if(n&1&&(s(0,"ion-card")(1,"ion-card-content")(2,"ion-label"),c(3,"Recording Progress"),a(),m(4,"ion-progress-bar",36),s(5,"ion-note"),c(6),a()()()),n&2){let t=g(3);r(4),z("value",t.recordingProgressPercent()/100),r(2),C("",t.recordingProgressPercent().toFixed(1),"% complete")}}function z2(n,l){if(n&1){let t=V();s(0,"ion-button",5),w("click",function(){p(t);let i=g(5);return x(i.pauseRecordedAudio())}),m(1,"ion-icon",42),a()}}function C2(n,l){if(n&1){let t=V();s(0,"ion-button",5),w("click",function(){p(t);let i=g(5);return x(i.playRecordedAudio())}),m(1,"ion-icon",43),a()}}function _2(n,l){if(n&1){let t=V();s(0,"ion-card",28)(1,"ion-card-content")(2,"h4"),c(3),a(),m(4,"ion-progress-bar",36),s(5,"ion-note"),c(6),a(),s(7,"ion-grid",37)(8,"ion-row")(9,"ion-col",25),u(10,z2,2,0,"ion-button",38)(11,C2,2,0,"ion-button",38),a(),s(12,"ion-col",25)(13,"ion-button",39),w("click",function(){p(t);let i=g(4);return x(i.stopRecordedAudio())}),m(14,"ion-icon",40),a()(),s(15,"ion-col",25)(16,"ion-button",39),w("click",function(){p(t);let i=g(4);return x(i.seekRecordedAudio(0))}),m(17,"ion-icon",41),a()()()()()()}if(n&2){let t,o=g(4);r(3),C("Now Playing: ",(t=o.currentRecordedFile())==null?null:t.filename),r(),z("value",o.recordedPlaybackProgress()/100),r(2),y(o.formattedRecordedPlaybackTime()),r(4),f(o.isRecordedAudioPlaying()?10:11)}}function B2(n,l){n&1&&(s(0,"ion-chip",44)(1,"ion-label"),c(2,"Segment Rolled"),a()())}function L2(n,l){n&1&&(s(0,"ion-chip",45),m(1,"ion-icon",53),s(2,"ion-label"),c(3,"Preloaded"),a()())}function y2(n,l){n&1&&(s(0,"ion-chip",46),m(1,"ion-icon",43),s(2,"ion-label"),c(3,"Playing"),a()())}function V2(n,l){if(n&1){let t=V();s(0,"ion-button",51),w("click",function(){p(t);let i=g().$implicit,e=g(4);return x(e.preloadRecordedAudio(i))}),m(1,"ion-icon",54),a()}}function S2(n,l){if(n&1){let t=V();s(0,"ion-button",55),w("click",function(){p(t);let i=g(5);return x(i.pauseRecordedAudio())}),m(1,"ion-icon",42),a()}}function A2(n,l){if(n&1){let t=V();s(0,"ion-button",56),w("click",function(){p(t);let i=g().$implicit,e=g(4);return x(e.playRecordedAudio(i))}),m(1,"ion-icon",43),a()}}function b2(n,l){if(n&1){let t=V();s(0,"ion-item")(1,"ion-label")(2,"h3"),c(3),a(),s(4,"p"),c(5),a(),s(6,"p"),c(7),a(),u(8,B2,3,0,"ion-chip",44),u(9,L2,4,0,"ion-chip",45),u(10,y2,4,0,"ion-chip",46),a(),s(11,"div",47),u(12,V2,2,0,"ion-button",48),u(13,S2,2,0,"ion-button",49)(14,A2,2,0,"ion-button",50),s(15,"ion-button",51),w("click",function(){let i=p(t).$implicit,e=g(4);return x(e.trimAudio(i))}),m(16,"ion-icon",52),a()()()}if(n&2){let t=l.$implicit,o=g(4);r(3),y(t.filename),r(2),C("Duration: ",o.formatTime(t.duration)),r(2),C("Size: ",o.formatFileSize(t.size)),r(),f(t.isSegmentRolled?8:-1),r(),f(o.isFilePreloaded(t.uri)?9:-1),r(),f(o.isCurrentlyPlaying(t)?10:-1),r(2),f(o.isFilePreloaded(t.uri)?-1:12),r(),f(o.isCurrentlyPlaying(t)?13:14)}}function H2(n,l){if(n&1&&(s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),c(3,"Recorded Files"),a()(),s(4,"ion-card-content"),u(5,_2,18,4,"ion-card",28),s(6,"ion-list"),H(7,b2,17,8,"ion-item",null,$0),a()()()),n&2){let t=g(3);r(5),f(t.currentRecordedFile()&&t.recordedPlaylistInitialized()?5:-1),r(2),j(t.recordedFiles())}}function j2(n,l){if(n&1){let t=V();s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",7),c(4," Audio Recording "),a()(),s(5,"ion-card-content"),c(6),s(7,"div",18)(8,"ion-chip",19),u(9,v2,3,0)(10,d2,3,0)(11,h2,3,0),a(),u(12,w2,2,1,"ion-note"),a(),s(13,"ion-grid")(14,"ion-row")(15,"ion-col",20)(16,"ion-button",21),w("click",function(){p(t);let i=g(2);return x(i.startRecording())}),m(17,"ion-icon",22),c(18," Start Recording "),a()(),s(19,"ion-col",20)(20,"ion-button",23),w("click",function(){p(t);let i=g(2);return x(i.pauseRecording())}),m(21,"ion-icon",24),c(22," Pause "),a()()(),s(23,"ion-row")(24,"ion-col",25)(25,"ion-button",26),w("click",function(){p(t);let i=g(2);return x(i.resumeRecording())}),m(26,"ion-icon",22),c(27," Resume "),a()(),s(28,"ion-col",25)(29,"ion-button",27),w("click",function(){p(t);let i=g(2);return x(i.stopRecording())}),m(30,"ion-icon",24),c(31," Stop "),a()()()(),u(32,M2,40,5,"ion-card",28),u(33,k2,7,2,"ion-card"),u(34,H2,9,1,"ion-card"),a()()}if(n&2){let t=g(2);r(6),C(" ",t.recordingStatus()," "),r(2),z("color",t.recordingStatus()==="recording"?"danger":t.recordingStatus()==="paused"?"warning":"medium"),r(),f(t.recordingStatus()==="recording"?9:t.recordingStatus()==="paused"?10:11),r(3),f(t.recordingDuration()>0?12:-1),r(4),z("disabled",!t.canRecord()),r(4),z("disabled",!t.canPause()),r(5),z("disabled",!t.canResume()),r(4),z("disabled",!t.canStop()),r(3),f(t.recordingStatus()==="idle"?32:-1),r(),f(t.isSegmentRollingEnabled()&&t.recordingStatus()!=="idle"?33:-1),r(),f(t.recordedFiles().length>0?34:-1)}}function O2(n,l){n&1&&(s(0,"ion-chip",58),m(1,"ion-icon",41),s(2,"ion-label"),c(3,"Live Updates Active"),a()())}function D2(n,l){n&1&&(s(0,"ion-chip",45),m(1,"ion-icon",53),s(2,"ion-label"),c(3,"Preloaded"),a()())}function T2(n,l){if(n&1&&(s(0,"ion-chip",65)(1,"ion-label"),c(2),a()()),n&2){let t=g(2),o=g(4);r(2),y(o.formatTime(t.duration))}}function P2(n,l){if(n&1&&u(0,T2,3,1,"ion-chip",65),n&2){let t=g();f(t.duration&&t.duration>0?0:-1)}}function E2(n,l){n&1&&(s(0,"ion-chip",64)(1,"ion-label"),c(2,"Failed to Load"),a()())}function F2(n,l){n&1&&u(0,P2,1,1)(1,E2,3,0,"ion-chip",64),n&2&&f(l.loaded?0:1)}function I2(n,l){if(n&1){let t=V();s(0,"div",62)(1,"ion-button",39),w("click",function(){p(t);let i=g().$implicit,e=g(3);return x(e.preloadTrack(i.url))}),m(2,"ion-icon",57),c(3," Load Track "),a()()}}function R2(n,l){if(n&1){let t=V();s(0,"div",66)(1,"ion-range",74),w("ionInput",function(i){p(t);let e=g(2).$implicit,v=g(3);return x(v.onSeekChange(i,e.url))}),s(2,"ion-label",75),c(3),a(),s(4,"ion-label",76),c(5),a()()()}if(n&2){let t=g(2).$implicit,o=g(3);r(),z("value",o.getTrackProgress(t.url))("min",0)("max",100)("pin",!0)("snaps",!1)("ticks",!1),r(2),y(o.formatTime(o.getTrackPosition(t.url))),r(2),y(o.formatTime(o.getTrackDuration(t.url)))}}function q2(n,l){if(n&1){let t=V();s(0,"div",73)(1,"ion-label")(2,"strong"),c(3,"Quick Seek:"),a()(),s(4,"ion-grid")(5,"ion-row")(6,"ion-col",31)(7,"ion-button",77),w("click",function(){p(t);let i=g(2).$implicit,e=g(3);return x(e.seekTrack(i.url,0))}),c(8," Start "),a()(),s(9,"ion-col",31)(10,"ion-button",77),w("click",function(){p(t);let i=g(2).$implicit,e=g(3);return x(e.seekTrack(i.url,15))}),c(11," 15s "),a()(),s(12,"ion-col",31)(13,"ion-button",77),w("click",function(){p(t);let i=g(2).$implicit,e=g(3);return x(e.seekTrack(i.url,30))}),c(14," 30s "),a()(),s(15,"ion-col",31)(16,"ion-button",77),w("click",function(){p(t);let i=g(2).$implicit,e=g(3);return x(e.seekTrack(i.url,60))}),c(17," 60s "),a()(),s(18,"ion-col",31)(19,"ion-button",77),w("click",function(){p(t);let i=g(2).$implicit,e=g(3);return x(e.seekTrack(i.url,e.getTrackDuration(i.url)/2))}),c(20," 50% "),a()()()()()}}function W2(n,l){if(n&1){let t=V();s(0,"div",63),u(1,R2,6,8,"div",66),s(2,"div",67)(3,"ion-grid")(4,"ion-row")(5,"ion-col",35)(6,"ion-button",68),w("click",function(){p(t);let i=g().$implicit,e=g(3);return x(e.playTrack(i.url))}),m(7,"ion-icon",43),a(),s(8,"ion-label",69),c(9,"Play"),a()(),s(10,"ion-col",35)(11,"ion-button",70),w("click",function(){p(t);let i=g().$implicit,e=g(3);return x(e.pauseTrack(i.url))}),m(12,"ion-icon",42),a(),s(13,"ion-label",69),c(14,"Pause"),a()(),s(15,"ion-col",35)(16,"ion-button",71),w("click",function(){p(t);let i=g().$implicit,e=g(3);return x(e.resumeTrack(i.url))}),m(17,"ion-icon",43),a(),s(18,"ion-label",69),c(19,"Resume"),a()(),s(20,"ion-col",35)(21,"ion-button",72),w("click",function(){p(t);let i=g().$implicit,e=g(3);return x(e.stopTrack(i.url))}),m(22,"ion-icon",40),a(),s(23,"ion-label",69),c(24,"Stop"),a()()()()(),u(25,q2,21,0,"div",73),a()}if(n&2){let t=g().$implicit,o=g(3);r(),f(o.getTrackPlaybackInfo(t.url)?1:-1),r(5),z("disabled",o.isTrackPlaying(t.url)),r(5),z("disabled",!o.isTrackPlaying(t.url)),r(5),z("disabled",!o.getTrackPlaybackInfo(t.url)||o.isTrackPlaying(t.url)),r(5),z("disabled",!o.getTrackPlaybackInfo(t.url)),r(4),f(o.getTrackPlaybackInfo(t.url)?25:-1)}}function $2(n,l){if(n&1&&(s(0,"ion-card",59)(1,"ion-card-header")(2,"ion-card-title"),c(3),a(),s(4,"ion-note"),c(5),a(),s(6,"div",61),u(7,D2,4,0,"ion-chip",45),u(8,F2,2,1),a()(),s(9,"ion-card-content"),u(10,I2,4,0,"div",62)(11,W2,26,6,"div",63),a()()),n&2){let t,o=l.$implicit,i=g(3);r(3),y(o.title),r(2),y(o.artist),r(2),f(i.isTrackPreloaded(o.url)?7:-1),r(),f((t=i.getPreloadedTrackInfo(o.url))?8:-1,t),r(2),f(i.isTrackPreloaded(o.url)?11:10)}}function U2(n,l){n&1&&(s(0,"ion-chip",45),m(1,"ion-icon",53),s(2,"ion-label"),c(3,"Loaded Successfully"),a()())}function N2(n,l){n&1&&(s(0,"ion-chip",64),m(1,"ion-icon",81),s(2,"ion-label"),c(3,"Failed to Load"),a()())}function Z2(n,l){if(n&1&&(s(0,"p")(1,"strong"),c(2,"Format:"),a(),c(3),a()),n&2){let t=g(2).$implicit;r(3),C(" ",t.mimeType)}}function G2(n,l){if(n&1&&(s(0,"p")(1,"strong"),c(2,"Duration:"),a(),c(3),a()),n&2){let t=g(2).$implicit,o=g(4);r(3),C(" ",o.formatTime(t.duration))}}function K2(n,l){if(n&1&&(s(0,"p")(1,"strong"),c(2,"File Size:"),a(),c(3),a()),n&2){let t=g(2).$implicit,o=g(4);r(3),C(" ",o.formatFileSize(t.size)," ")}}function Q2(n,l){if(n&1&&(s(0,"div",78),u(1,Z2,4,1,"p"),u(2,G2,4,1,"p"),u(3,K2,4,1,"p"),a()),n&2){let t=g().$implicit;r(),f(t.mimeType?1:-1),r(),f(t.duration&&t.duration>0?2:-1),r(),f(t.size&&t.size>0?3:-1)}}function X2(n,l){n&1&&m(0,"ion-icon",79)}function Y2(n,l){n&1&&m(0,"ion-icon",80)}function J2(n,l){if(n&1&&(s(0,"ion-item")(1,"ion-label")(2,"h3"),c(3),a(),u(4,U2,4,0,"ion-chip",45)(5,N2,4,0,"ion-chip",64),u(6,Q2,4,3,"div",78),a(),s(7,"div",76),u(8,X2,1,0,"ion-icon",79)(9,Y2,1,0,"ion-icon",80),a()()),n&2){let t=l.$implicit,o=g(4);r(3),y(o.getTrackTitleByUrl(t.url)),r(),f(t.loaded?4:5),r(2),f(t.loaded?6:-1),r(2),f(t.loaded?8:9)}}function o4(n,l){if(n&1&&(s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",13),c(4," Preloaded Track Details "),a()(),s(5,"ion-card-content")(6,"ion-list"),H(7,J2,10,4,"ion-item",null,r2),a()()()),n&2){let t=g(3);r(7),j(t.preloadedTrackInfo())}}function t4(n,l){if(n&1){let t=V();s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",9),c(4," Per-URL Audio Playback Demo "),a()(),s(5,"ion-card-content")(6,"p"),c(7,"Independent playback controls for each demo track"),a(),s(8,"ion-grid")(9,"ion-row")(10,"ion-col",20)(11,"ion-button",39),w("click",function(){p(t);let i=g(2);return x(i.preloadAllTracks())}),m(12,"ion-icon",57),c(13," Preload All Tracks "),a()(),s(14,"ion-col",20),u(15,O2,4,0,"ion-chip",58),a()()(),s(16,"ion-card")(17,"ion-card-header")(18,"ion-card-title"),c(19,"Demo Tracks"),a()(),s(20,"ion-card-content"),H(21,$2,12,5,"ion-card",59,U0),a()(),s(23,"ion-card",60)(24,"ion-card-header")(25,"ion-card-title"),c(26,"Playback Summary"),a()(),s(27,"ion-card-content")(28,"ion-item")(29,"ion-label"),c(30,"Preloaded Tracks"),a(),s(31,"ion-chip",19),c(32),a()(),s(33,"ion-item")(34,"ion-label"),c(35,"Currently Playing"),a(),s(36,"ion-note"),c(37),a()()()(),u(38,o4,9,0,"ion-card"),a()()}if(n&2){let t=g(2);r(15),f(t.realtimeUpdatesActive()?15:-1),r(6),j(t.demoPlaylist),r(10),z("color",t.hasPreloadedTracks()?"success":"medium"),r(),c1(" ",t.preloadedTracks().size," of ",t.demoPlaylist.length," "),r(5),y(t.getCurrentlyPlayingTrack()),r(),f(t.preloadedTrackInfo().length>0?38:-1)}}function i4(n,l){n&1&&(s(0,"ion-card",3)(1,"ion-card-content")(2,"p"),c(3,"\u26A0\uFE0F Microphone is currently busy or in use by another application."),a()()())}function n4(n,l){if(n&1&&(s(0,"p"),c(1),a()),n&2){let t=g().$implicit;r(),y(t.description)}}function e4(n,l){n&1&&(s(0,"ion-chip",86)(1,"ion-label"),c(2,"Active"),a()())}function a4(n,l){if(n&1){let t=V();s(0,"ion-item",85),w("click",function(){let i=p(t).$implicit,e=g(4);return x(e.switchMicrophone(i.id))}),s(1,"ion-label")(2,"h3"),c(3),a(),s(4,"p"),c(5),Z(6,"titlecase"),a(),u(7,n4,2,1,"p"),a(),u(8,e4,3,0,"ion-chip",86),a()}if(n&2){let t=l.$implicit,o=g(4);r(3),y(t.name),r(2),C("Type: ",$1(6,4,t.type)),r(2),f(t.description?7:-1),r(),f(o.currentMicrophone()===t.id?8:-1)}}function s4(n,l){if(n&1&&(s(0,"ion-list")(1,"ion-item-group")(2,"ion-item-divider")(3,"ion-label"),c(4,"Available Microphones"),a()(),H(5,a4,9,6,"ion-item",84,U0),a()()),n&2){let t=g(3);r(5),j(t.availableMicrophones())}}function l4(n,l){n&1&&(s(0,"ion-card",28)(1,"ion-card-content")(2,"p"),c(3,' No microphones detected. Click "Refresh Microphones" to scan for available devices. '),a()()())}function c4(n,l){if(n&1){let t=V();s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",11),c(4," Microphone Management "),a()(),s(5,"ion-card-content")(6,"ion-button",39),w("click",function(){p(t);let i=g(2);return x(i.loadAvailableMicrophones())}),m(7,"ion-icon",82),c(8," Refresh Microphones "),a(),s(9,"ion-button",39),w("click",function(){p(t);let i=g(2);return x(i.checkMicrophoneStatus())}),m(10,"ion-icon",83),c(11," Check Microphone Status "),a(),u(12,i4,4,0,"ion-card",3),u(13,s4,7,0,"ion-list")(14,l4,4,0,"ion-card",28),a()()}if(n&2){let t=g(2);r(12),f(t.microphoneBusy()?12:-1),r(),f(t.availableMicrophones().length>0?13:14)}}function r4(n,l){n&1&&m(0,"ion-icon",87)}function g4(n,l){if(n&1){let t=V();s(0,"ion-item",85),w("click",function(){let i=p(t).$implicit,e=g(4);return x(e.selectedAudioInfo.set(i))}),s(1,"ion-label")(2,"h3"),c(3),a(),s(4,"p"),c(5),a()(),u(6,r4,1,0,"ion-icon",87),a()}if(n&2){let t=l.$implicit,o=g(4);r(3),y(t.filename),r(2),c1("",o.formatTime(t.duration)," \u2022 ",o.formatFileSize(t.size)),r(),f(o.selectedAudioInfo()===t?6:-1)}}function v4(n,l){if(n&1&&(s(0,"ion-row")(1,"ion-col",88)(2,"ion-chip",0),m(3,"ion-icon",90),s(4,"ion-label"),c(5,"Segment Rolled Recording"),a()(),s(6,"p"),c(7),a()()()),n&2){let t=g(5);r(7),C("Max Duration: ",t.selectedAudioInfo().maxDurationSeconds,"s")}}function d4(n,l){if(n&1&&(s(0,"ion-card",28)(1,"ion-card-header")(2,"ion-card-title"),c(3),a()(),s(4,"ion-card-content")(5,"ion-grid")(6,"ion-row")(7,"ion-col",20)(8,"ion-label")(9,"h3"),c(10,"Duration"),a(),s(11,"p"),c(12),a()()(),s(13,"ion-col",20)(14,"ion-label")(15,"h3"),c(16,"File Size"),a(),s(17,"p"),c(18),a()()()(),s(19,"ion-row")(20,"ion-col",20)(21,"ion-label")(22,"h3"),c(23,"Sample Rate"),a(),s(24,"p"),c(25),a()()(),s(26,"ion-col",20)(27,"ion-label")(28,"h3"),c(29,"Channels"),a(),s(30,"p"),c(31),a()()()(),s(32,"ion-row")(33,"ion-col",20)(34,"ion-label")(35,"h3"),c(36,"Bitrate"),a(),s(37,"p"),c(38),a()()(),s(39,"ion-col",20)(40,"ion-label")(41,"h3"),c(42,"MIME Type"),a(),s(43,"p"),c(44),a()()()(),s(45,"ion-row")(46,"ion-col",88)(47,"ion-label")(48,"h3"),c(49,"File Path"),a(),s(50,"p",89),c(51),a()()()(),u(52,v4,8,1,"ion-row"),a()()()),n&2){let t=g(4);r(3),y(t.selectedAudioInfo().filename),r(9),y(t.formatTime(t.selectedAudioInfo().duration)),r(6),y(t.formatFileSize(t.selectedAudioInfo().size)),r(7),C("",t.selectedAudioInfo().sampleRate," Hz"),r(6),y(t.selectedAudioInfo().channels===1?"Mono":"Stereo"),r(7),C("",t.selectedAudioInfo().bitrate/1e3,"k bps"),r(6),y(t.selectedAudioInfo().mimeType),r(7),y(t.selectedAudioInfo().path),r(),f(t.selectedAudioInfo().isSegmentRolled?52:-1)}}function h4(n,l){if(n&1&&(s(0,"ion-list"),H(1,g4,7,4,"ion-item",84,$0),a(),u(3,d4,53,9,"ion-card",28)),n&2){let t=g(3);r(),j(t.recordedFiles()),r(2),f(t.selectedAudioInfo()?3:-1)}}function w4(n,l){n&1&&(s(0,"ion-card",28)(1,"ion-card-content")(2,"p"),c(3," No recorded files available. Record some audio first to see detailed information here. "),a()()())}function m4(n,l){if(n&1){let t=V();s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",13),c(4," Audio File Information "),a()(),s(5,"ion-card-content"),u(6,h4,4,1)(7,w4,4,0,"ion-card",28),a()(),s(8,"ion-card")(9,"ion-card-header")(10,"ion-card-title"),m(11,"ion-icon",4),c(12," App Permissions "),a()(),s(13,"ion-card-content")(14,"p"),c(15,"Manage app permissions directly from your device's system settings."),a(),s(16,"ion-button",39),w("click",function(){p(t);let i=g(2);return x(i.openSettings())}),c(17,">> "),m(18,"ion-icon",2),c(19," Open App Permissions "),a(),s(20,"ion-note")(21,"p")(22,"small"),c(23," Use this to modify microphone permissions, notification settings, and other app-specific configurations. This is especially useful if you initially denied permissions and want to enable them later. "),a()()()()()}if(n&2){let t=g(2);r(6),f(t.recordedFiles().length>0?6:7)}}function p4(n,l){if(n&1&&(s(0,"ion-select-option",36),c(1),a()),n&2){let t=l.$implicit;z("value",t.value),r(),y(t.label)}}function x4(n,l){if(n&1&&(s(0,"ion-select-option",36),c(1),a()),n&2){let t=l.$implicit;z("value",t.value),r(),y(t.label)}}function u4(n,l){if(n&1&&(s(0,"ion-select-option",36),c(1),a()),n&2){let t=l.$implicit;z("value",t.value),r(),y(t.label)}}function f4(n,l){if(n&1&&(s(0,"ion-select-option",36),c(1),a()),n&2){let t=l.$implicit;z("value",t.value),r(),y(t.label)}}function M4(n,l){if(n&1){let t=V();s(0,"ion-item")(1,"ion-label"),c(2),a(),s(3,"ion-range",104),w("ionInput",function(i){p(t);let e=g(5);return x(e.updateVadWindowSize(i.detail.value))}),s(4,"ion-label",75),c(5,"3"),a(),s(6,"ion-label",76),c(7,"20"),a()()(),s(8,"ion-item")(9,"ion-checkbox",32),w("ionChange",function(){p(t);let i=g(5);return x(i.toggleVoiceBandFilter())}),a(),s(10,"ion-label",92),c(11," Voice Band Filter (85Hz-3400Hz) "),s(12,"ion-note"),c(13,"Reduces background noise outside human voice range"),a()()(),s(14,"ion-item")(15,"ion-checkbox",32),w("ionChange",function(){p(t);let i=g(5);return x(i.toggleVadDebugMode())}),a(),s(16,"ion-label",92),c(17," Debug Mode "),s(18,"ion-note"),c(19,"Enables detailed VAD logging for troubleshooting"),a()()(),s(20,"ion-button",105),w("click",function(){p(t);let i=g(5);return x(i.configureAdvancedVAD())}),c(21," Apply Advanced VAD Settings "),a()}if(n&2){let t=g(5);r(2),c1(" VAD Window: ",t.vadWindowSize()," frames (~",t.vadWindowSize()*50,"ms latency) "),r(),z("value",t.vadWindowSize()),r(6),z("checked",t.voiceBandFilterEnabled()),r(6),z("checked",t.vadDebugMode())}}function k4(n,l){if(n&1){let t=V();s(0,"ion-item")(1,"ion-label"),c(2),a(),s(3,"ion-select",93),w("ionChange",function(i){p(t);let e=g(4);return x(e.updateCalibrationDuration(i.detail.value))}),H(4,f4,2,2,"ion-select-option",36,Q),a()(),s(6,"ion-item-divider",28)(7,"ion-label"),c(8,"Advanced VAD Optimization"),a()(),s(9,"ion-item")(10,"ion-note",103),c(11," Configure VAD for optimal latency and noise rejection. Lower window sizes reduce latency but may increase false positives. "),a()(),s(12,"ion-card",28)(13,"ion-card-content")(14,"h4"),c(15,"Advanced VAD Features"),a(),s(16,"ul")(17,"li")(18,"strong"),c(19,"Window Size:"),a(),c(20," 3-20 frames (150ms-1000ms latency)"),a(),s(21,"li")(22,"strong"),c(23,"Voice Filter:"),a(),c(24," Isolates human voice frequencies (85Hz-3400Hz) "),a(),s(25,"li")(26,"strong"),c(27,"Debug Mode:"),a(),c(28," Enables detailed logging for troubleshooting "),a()()()(),s(29,"ion-item")(30,"ion-checkbox",32),w("ionChange",function(){p(t);let i=g(4);return x(i.toggleAdvancedVAD())}),a(),s(31,"ion-label",92),c(32,"Enable Advanced VAD"),a()(),u(33,M4,22,5)}if(n&2){let t=g(4);r(2),C("Background Calibration: ",t.calibrationDuration(),"ms"),r(),z("value",t.calibrationDuration()),r(),j(t.calibrationDurationOptions),r(26),z("checked",t.advancedVADEnabled()),r(3),f(t.advancedVADEnabled()?33:-1)}}function z4(n,l){if(n&1){let t=V();s(0,"ion-item")(1,"ion-label"),c(2),a(),s(3,"ion-select",93),w("ionChange",function(i){p(t);let e=g(3);return x(e.updateSpeechThreshold(i.detail.value))}),H(4,u4,2,2,"ion-select-option",36,Q),a()(),s(6,"ion-item")(7,"ion-checkbox",32),w("ionChange",function(){p(t);let i=g(3);return x(i.toggleVAD())}),a(),s(8,"ion-label",92),c(9,"Use Voice Activity Detection (VAD)"),a()(),u(10,k4,34,4)}if(n&2){let t=g(3);r(2),C("Threshold: ",t.speechThreshold()),r(),z("value",t.speechThreshold()),r(),j(t.speechThresholdOptions),r(3),z("checked",t.useVAD()),r(3),f(t.useVAD()?10:-1)}}function C4(n,l){if(n&1&&(m(0,"div",108),Z(1,"number")),n&2){let t=l.$implicit;J("height",t===0?5:t*100,"%")("background-color",t===0?"#cccccc":t>.8?"#f04141":t>.5?"#ffc409":"#2dd36f"),z("title",t===0?"Silence (level = 0)":"Audio level: "+r1(1,5,t,"1.3-3"))}}function _4(n,l){n&1&&(s(0,"ion-note")(1,"p"),c(2," Start recording to see real-time continuous waveform data (50ms intervals)... "),a(),s(3,"p")(4,"em"),c(5,"Silence will show as level = 0 instead of being omitted"),a()()())}function B4(n,l){if(n&1&&(s(0,"div",106),H(1,C4,2,8,"div",107,o0),a(),u(3,_4,6,0,"ion-note")),n&2){let t=g(3);r(),j(t.waveformVisualizationData()),r(2),f(t.waveformHistory().length===0?3:-1)}}function L4(n,l){n&1&&(s(0,"ion-note")(1,"p"),c(2,"Waveform visualization is disabled. Enable it above to see live audio levels."),a()())}function y4(n,l){if(n&1){let t=V();s(0,"ion-card")(1,"ion-card-header")(2,"ion-card-title"),m(3,"ion-icon",15),c(4," Growing Waveform Visualization with Speech Detection "),a(),s(5,"ion-card-subtitle"),c(6," Real-time incremental audio levels with optional speech-only detection and Voice Activity Detection (VAD) "),a()(),s(7,"ion-card-content")(8,"div",91)(9,"ion-item")(10,"ion-checkbox",32),w("ionChange",function(){p(t);let i=g(2);return x(i.toggleWaveformEnabled())}),a(),s(11,"ion-label",92),c(12,"Enable Waveform"),a()(),s(13,"ion-item")(14,"ion-label"),c(15),a(),s(16,"ion-select",93),w("ionChange",function(i){p(t);let e=g(2);return x(e.updateWaveformBars(i.detail.value))}),H(17,p4,2,2,"ion-select-option",36,Q),a()(),s(19,"ion-item")(20,"ion-label"),c(21),a(),s(22,"ion-select",93),w("ionChange",function(i){p(t);let e=g(2);return x(e.updateWaveformInterval(i.detail.value))}),H(23,x4,2,2,"ion-select-option",36,Q),a()(),s(25,"ion-button",39),w("click",function(){p(t);let i=g(2);return x(i.resetWaveformLevels())}),m(26,"ion-icon",82),c(27," Reset Levels "),a(),s(28,"ion-button",94),w("click",function(){p(t);let i=g(2);return x(i.destroyWaveform())}),m(29,"ion-icon",95),c(30," Destroy Waveform "),a()(),s(31,"div",96)(32,"ion-item-divider")(33,"ion-label"),c(34,"Speech Detection Settings"),a()(),s(35,"ion-item")(36,"ion-checkbox",32),w("ionChange",function(){p(t);let i=g(2);return x(i.toggleSpeechDetection())}),a(),s(37,"ion-label",92),c(38,"Enable Speech-Only Detection"),a()(),u(39,z4,11,4),a(),s(40,"div",97)(41,"h4"),c(42,"Growing Waveform Data"),a(),s(43,"p")(44,"strong"),c(45,"Max Level:"),a(),c(46),Z(47,"number"),a(),s(48,"p")(49,"strong"),c(50,"History Length:"),a(),c(51),a(),s(52,"p")(53,"strong"),c(54,"Display Bars:"),a(),c(55),a(),s(56,"div",98)(57,"h5"),c(58,"Continuous Emission (50ms intervals)"),a(),s(59,"p")(60,"strong"),c(61,"Total Emissions:"),a(),c(62),a(),s(63,"p")(64,"strong"),c(65,"Silence Emissions:"),a(),c(66),a(),s(67,"p")(68,"strong"),c(69,"Speech Ratio:"),a(),c(70),Z(71,"number"),a(),s(72,"p")(73,"strong"),c(74,"Current State:"),a(),s(75,"ion-chip",19),c(76),a()()(),u(77,B4,4,1)(78,L4,3,0,"ion-note"),a(),s(79,"ion-accordion-group")(80,"ion-accordion",99)(81,"ion-item",100)(82,"ion-label"),c(83,"Growing Waveform History"),a()(),s(84,"div",101)(85,"pre",102),c(86),Z(87,"json"),a()()()()()()}if(n&2){let t=g(2);r(10),z("checked",t.waveformEnabled()),r(5),C("Number of Bars: ",t.waveformBars()),r(),z("value",t.waveformBars()),r(),j(t.waveformBarsOptions),r(4),C("Emission Interval: ",t.waveformIntervalSeconds(),"s"),r(),z("value",t.waveformIntervalSeconds()),r(),j(t.waveformIntervalOptions),r(13),z("checked",t.speechDetectionEnabled()),r(3),f(t.speechDetectionEnabled()?39:-1),r(7),C(" ",r1(47,17,t.maxWaveformLevel(),"1.3-3")),r(5),C(" ",t.waveformHistory().length," levels"),r(4),C(" ",t.waveformBars()),r(7),C(" ",t.totalEmissions()),r(4),C(" ",t.silenceEmissions()),r(4),C(" ",t.totalEmissions()>0?r1(71,20,(t.totalEmissions()-t.silenceEmissions())/t.totalEmissions()*100,"1.1-1")+"%":"N/A"," "),r(5),z("color",t.silenceDetected()?"medium":"success"),r(),C(" ",t.silenceDetected()?"Silence (level = 0)":"Audio Detected"," "),r(),f(t.waveformEnabled()?77:78),r(9),y($1(87,23,t.waveformHistory()))}}function V4(n,l){n&1&&m(0,"app-intelligent-waveform")}function S4(n,l){if(n&1){let t=V();s(0,"div")(1,"ion-button",6),w("click",function(){p(t);let i=g();return x(i.selectTab("recording"))}),m(2,"ion-icon",7),s(3,"ion-label"),c(4,"Recording"),a()(),s(5,"ion-button",8),w("click",function(){p(t);let i=g();return x(i.selectTab("playback"))}),m(6,"ion-icon",9),s(7,"ion-label"),c(8,"Playback"),a()(),s(9,"ion-button",10),w("click",function(){p(t);let i=g();return x(i.selectTab("microphones"))}),m(10,"ion-icon",11),s(11,"ion-label"),c(12,"Microphones"),a()(),s(13,"ion-button",12),w("click",function(){p(t);let i=g();return x(i.selectTab("audio-info"))}),m(14,"ion-icon",13),s(15,"ion-label"),c(16,"Audio Info"),a()(),s(17,"ion-button",14),w("click",function(){p(t);let i=g();return x(i.selectTab("waveform"))}),m(18,"ion-icon",15),s(19,"ion-label"),c(20,"Waveform"),a()(),s(21,"ion-button",16),w("click",function(){p(t);let i=g();return x(i.selectTab("intelligent-waveform"))}),m(22,"ion-icon",17),s(23,"ion-label"),c(24,"Smart Buffer"),a()()(),c(25),u(26,j2,35,11,"ion-card"),u(27,t4,39,6,"ion-card"),u(28,c4,15,2,"ion-card"),u(29,m4,24,1),u(30,y4,88,25,"ion-card"),u(31,V4,1,0,"app-intelligent-waveform")}if(n&2){let t=g();r(25),C(" ",t.activeTab()," "),r(),f(t.activeTab()==="recording"?26:-1),r(),f(t.activeTab()==="playback"?27:-1),r(),f(t.activeTab()==="microphones"?28:-1),r(),f(t.activeTab()==="audio-info"?29:-1),r(),f(t.activeTab()==="waveform"?30:-1),r(),f(t.activeTab()==="intelligent-waveform"?31:-1)}}var k3=(()=>{let l=class l{constructor(){this.toastController=K(L0),this.alertController=K(B0),this.recordingStatus=k("idle"),this.recordingDuration=k(0),this.hasPermission=k(!1),this.permissionChecked=k(!1),this.recordingOptions=k({sampleRate:44100,channels:1,bitrate:128e3}),this.isSegmentRollingEnabled=k(!1),this.maxDurationSeconds=k(void 0),this.availableMicrophones=k([]),this.currentMicrophone=k(null),this.microphoneBusy=k(!1),this.waveformHistory=k([]),this.waveformBars=k(32),this.waveformEnabled=k(!0),this.maxWaveformLevel=k(0),this.waveformIntervalSeconds=k(1),this.speechDetectionEnabled=k(!1),this.speechThreshold=k(.04),this.useVAD=k(!0),this.calibrationDuration=k(1e3),this.advancedVADEnabled=k(!0),this.vadWindowSize=k(5),this.voiceBandFilterEnabled=k(!0),this.vadDebugMode=k(!1),this.continuousEmissionEnabled=k(!0),this.silenceDetected=k(!1),this.lastEmissionTime=k(0),this.totalEmissions=k(0),this.silenceEmissions=k(0),this.recordedFiles=k([]),this.selectedAudioInfo=k(null),this.trackPlaybackStates=k(new Map),this.preloadedTracks=k(new Set),this.preloadedTrackInfo=k([]),this.realtimeUpdatesActive=k(!1),this.recordedAudioPlaybackInfo=k(null),this.recordedPlaylistInitialized=k(!1),this.currentRecordedFile=k(null),this.preloadedFiles=k(new Set),this.demoPlaylist=[{id:"demo1",url:"https://cms-public-artifacts.artlist.io/content/music/aac/9479_267163_267163_12_-_Continent_-16-44.1-.aac",title:"Demo Track 1",artist:"Demo Artist",artworkUrl:"https://via.placeholder.com/300x300/FF6B6B/FFFFFF?text=Track+1"},{id:"demo2",url:"https://cms-public-artifacts.artlist.io/content/music/aac/5651_257500_257500_01_-_DuDa_-16-44.1-.aac",title:"Demo Track 2",artist:"Demo Artist",artworkUrl:"https://via.placeholder.com/300x300/4ECDC4/FFFFFF?text=Track+2"},{id:"demo3",url:"https://cms-public-artifacts.artlist.io/content/music/aac/969633_968857_Yarin_Primak_-_bring_it_back_-_IH-000420_-_Master_V2_-_148_Bpm_-_081024_-_BOV_-_ORG_-_2444.aac",title:"Demo Track 3",artist:"Demo Artist",artworkUrl:"https://via.placeholder.com/300x300/45B7D1/FFFFFF?text=Track+3"},{id:"demo4",url:"https://cms-public-artifacts.artlist.io/content/music/aac/969371_969230_Ran_Haim_Raiten_-_Youre_Welcome_to_Hop_-_AO-002482_-_Master_V1_-_158_Bpm_-_BOV_-_ORG_-_2444.aac",title:"Demo Track 4",artist:"Demo Artist",artworkUrl:"https://via.placeholder.com/300x300/FF9F43/FFFFFF?text=Track+4"}],this.activeTab=k("recording"),this.sampleRateOptions=[{value:8e3,label:"8k"},{value:16e3,label:"16k"},{value:22050,label:"22k"},{value:44100,label:"44k"},{value:48e3,label:"48k"}],this.channelOptions=[{value:1,label:"Mono"},{value:2,label:"Stereo"}],this.bitrateOptions=[{value:64e3,label:"64k"},{value:96e3,label:"96k"},{value:128e3,label:"128k"},{value:192e3,label:"192k"},{value:256e3,label:"256k"},{value:32e4,label:"320k"}],this.maxDurationOptions=[{value:5,label:"5s"},{value:30,label:"30s"},{value:60,label:"1m"},{value:120,label:"2m"},{value:300,label:"5m"},{value:600,label:"10m"}],this.waveformBarsOptions=[{value:16,label:"16"},{value:24,label:"24"},{value:32,label:"32"},{value:48,label:"48"},{value:64,label:"64"},{value:96,label:"96"},{value:128,label:"128"}],this.waveformIntervalOptions=[{value:.05,label:"50ms (20fps - Real-time)"},{value:.1,label:"100ms (10fps - Smooth)"},{value:.2,label:"200ms (5fps - Responsive)"},{value:.5,label:"500ms (2fps - Moderate)"},{value:1,label:"1s (1fps - Default)"},{value:2,label:"2s (0.5fps - Slow)"},{value:5,label:"5s (0.2fps - Very Slow)"}],this.speechThresholdOptions=[{value:.005,label:"0.005 (Ultra Sensitive)"},{value:.01,label:"0.01 (Very Sensitive)"},{value:.02,label:"0.02 (Sensitive)"},{value:.04,label:"0.04 (Default)"},{value:.06,label:"0.06 (Less Sensitive)"},{value:.1,label:"0.1 (Low Sensitivity)"}],this.calibrationDurationOptions=[{value:500,label:"0.5s"},{value:1e3,label:"1s (Default)"},{value:1500,label:"1.5s"},{value:2e3,label:"2s"},{value:3e3,label:"3s"}],this.canRecord=b(()=>this.hasPermission()&&this.recordingStatus()==="idle"),this.canPause=b(()=>this.recordingStatus()==="recording"),this.canResume=b(()=>this.recordingStatus()==="paused"),this.canStop=b(()=>["recording","paused"].includes(this.recordingStatus())),this.recordingProgressPercent=b(()=>{if(!this.isSegmentRollingEnabled())return 0;let o=this.maxDurationSeconds(),i=this.recordingDuration();return!o||o<=0?0:Math.min(i/o*100,100)}),this.formattedDuration=b(()=>this.formatTime(this.recordingDuration())),this.normalizedWaveformHistory=b(()=>{let o=this.waveformHistory(),i=this.maxWaveformLevel();return i===0?o:o.map(e=>e/i)}),this.waveformVisualizationData=b(()=>{let o=this.normalizedWaveformHistory(),i=this.waveformBars();return o.length>=i?o.slice(-i):[...new Array(i-o.length).fill(0),...o]}),this.hasPreloadedTracks=b(()=>this.preloadedTracks().size>0),this.isRecordedAudioPlaying=b(()=>{var o;return((o=this.recordedAudioPlaybackInfo())==null?void 0:o.isPlaying)||!1}),this.recordedPlaybackPosition=b(()=>{var o;return((o=this.recordedAudioPlaybackInfo())==null?void 0:o.currentPosition)||0}),this.recordedTrackDuration=b(()=>{var o;return((o=this.recordedAudioPlaybackInfo())==null?void 0:o.duration)||0}),this.recordedPlaybackProgress=b(()=>{let o=this.recordedPlaybackPosition(),i=this.recordedTrackDuration();return i>0?o/i*100:0}),this.formattedRecordedPlaybackTime=b(()=>`${this.formatTime(this.recordedPlaybackPosition())} / ${this.formatTime(this.recordedTrackDuration())}`),n1({micCircle:b0,micOffCircle:H0,volumeHigh:T0,settings:D1,informationCircle:A0,refresh:O1,cut:V0,time:P1,play:H1,pause:b1,stop:T1,playSkipForward:D0,playSkipBack:O0,musicalNotes:j0,download:S0,checkmarkCircle:A1,closeCircle:y0,pulse:j1,analytics:S1})}getTrackPlaybackInfo(o){return this.trackPlaybackStates().get(o)||null}isTrackPlaying(o){var i;return((i=this.getTrackPlaybackInfo(o))==null?void 0:i.isPlaying)||!1}getTrackPosition(o){var i;return((i=this.getTrackPlaybackInfo(o))==null?void 0:i.currentPosition)||0}getTrackDuration(o){var i;return((i=this.getTrackPlaybackInfo(o))==null?void 0:i.duration)||0}getTrackProgress(o){let i=this.getTrackPosition(o),e=this.getTrackDuration(o);return e>0?i/e*100:0}getFormattedTrackTime(o){return`${this.formatTime(this.getTrackPosition(o))} / ${this.formatTime(this.getTrackDuration(o))}`}isTrackPreloaded(o){return this.preloadedTracks().has(o)}getPreloadedTrackInfo(o){return this.preloadedTrackInfo().find(i=>i.url===o)||null}getTrackTitleByUrl(o){var i;return((i=this.demoPlaylist.find(e=>e.url===o))==null?void 0:i.title)||"Unknown Track"}hasAnyTrackPlaying(){return this.demoPlaylist.some(o=>this.isTrackPlaying(o.url))}getCurrentlyPlayingTrack(){let o=this.demoPlaylist.find(i=>this.isTrackPlaying(i.url));return(o==null?void 0:o.title)||"None"}checkPermission(){return d(this,null,function*(){try{let o=yield _.checkPermission();this.hasPermission.set(o.granted),this.permissionChecked.set(!0)}catch(o){console.error("Permission check failed:",o),this.hasPermission.set(!1),this.permissionChecked.set(!0)}this.hasPermission()?yield this.showToast("Permission granted. You can record audio.","success"):yield this.showToast("Permission denied. Cannot record audio.","danger")})}requestPermission(){return d(this,null,function*(){try{let o=yield _.requestPermission();this.hasPermission.set(o.granted),o.granted||(yield this.showToast("Permission denied. Cannot record audio.","warning"))}catch(o){console.error("Permission request failed:",o),yield this.showToast("Permission request failed.","danger")}})}openSettings(){return d(this,null,function*(){try{yield _.openSettings(),yield this.showToast("Opening app permissions...","success")}catch(o){console.error("Failed to open app settings:",o),yield this.showToast("Failed to open app permissions","danger")}})}startRecording(){return d(this,null,function*(){if(!(!this.hasPermission()&&(yield this.requestPermission(),!this.hasPermission())))try{this.waveformEnabled()&&(yield this.configureWaveform(),yield this.configureSpeechDetection(),this.speechDetectionEnabled()&&this.useVAD()&&this.advancedVADEnabled()&&(yield this.configureAdvancedVAD()));let o=this.recordingOptions(),i=this.isSegmentRollingEnabled()?{maxDuration:this.maxDurationSeconds()}:{};yield _.startRecording(P(P({},o),i)),this.recordingStatus.set("recording"),yield this.showToast("Recording started","success"),this.setupRecordingEventListeners(),this.startDurationTimer()}catch(o){console.error("Failed to start recording:",o),yield this.showToast("Failed to start recording","danger")}})}pauseRecording(){return d(this,null,function*(){try{yield _.pauseRecording(),this.recordingStatus.set("paused"),yield this.showToast("Recording paused","warning")}catch(o){console.error("Failed to pause recording:",o),yield this.showToast("Failed to pause recording","danger")}})}resumeRecording(){return d(this,null,function*(){try{yield _.resumeRecording(),this.recordingStatus.set("recording"),yield this.showToast("Recording resumed","success"),this.startDurationTimer()}catch(o){console.error("Failed to resume recording:",o),yield this.showToast("Failed to resume recording","danger")}})}stopRecording(){return d(this,null,function*(){this.recordingStatus.set("idle"),this.recordingDuration.set(0);try{let o=yield _.stopRecording(),i=U(P({},o),{isSegmentRolled:this.isSegmentRollingEnabled(),maxDurationSeconds:this.maxDurationSeconds()});this.recordedFiles.update(e=>[...e,i]),yield this.showToast("Recording stopped and saved","success")}catch(o){console.error("Failed to stop recording:",o),o!=null&&o.toString().includes("No active recording to stop")||(yield this.showToast("Failed to stop recording","danger"))}})}loadAvailableMicrophones(){return d(this,null,function*(){try{let o=yield _.getAvailableMicrophones();this.availableMicrophones.set(o.microphones)}catch(o){console.error("Failed to load microphones:",o),yield this.showToast("Failed to load microphones","danger")}})}checkMicrophoneStatus(){return d(this,null,function*(){try{let o=yield _.isMicrophoneBusy();this.microphoneBusy.set(o.busy)}catch(o){console.error("Failed to check microphone status:",o),yield this.showToast("Failed to check microphone status","danger")}})}switchMicrophone(o){return d(this,null,function*(){try{let i=yield _.switchMicrophone({microphoneId:o});i.success?(this.currentMicrophone.set(i.microphoneId),yield this.showToast("Microphone switched successfully","success")):yield this.showToast("Failed to switch microphone","warning")}catch(i){console.error("Failed to switch microphone:",i),yield this.showToast("Failed to switch microphone","danger")}})}preloadTrack(o){return d(this,null,function*(){try{let i=yield _.preloadTracks({tracks:[o],preloadNext:!1});this.preloadedTracks.update(h=>new Set([...Array.from(h),o])),this.preloadedTrackInfo.update(h=>[...h.filter(B=>B.url!==o),...i.tracks]);let e=this.demoPlaylist.find(h=>h.url===o),v=i.tracks.find(h=>h.url===o);v!=null&&v.loaded?yield this.showToast(`Preloaded: ${(e==null?void 0:e.title)||"Track"} (${v.mimeType||"Unknown format"})`,"success"):yield this.showToast(`Failed to preload: ${(e==null?void 0:e.title)||"Track"}`,"warning"),this.preloadedTracks().size===1&&(this.setupPlaybackEventListeners(),this.setupWaveformEventListeners())}catch(i){console.error("Failed to preload track:",i),yield this.showToast("Failed to preload track","danger")}})}preloadAllTracks(){return d(this,null,function*(){try{let o=this.demoPlaylist.map(M=>M.url),i=yield _.preloadTracks({tracks:o,preloadNext:!0}),e=i.tracks.filter(M=>M.loaded).map(M=>M.url);this.preloadedTracks.set(new Set(e)),this.preloadedTrackInfo.set(i.tracks);let v=i.tracks.filter(M=>M.loaded).length,h=i.tracks.length;v===h?yield this.showToast("All demo tracks preloaded successfully","success"):yield this.showToast(`${v}/${h} tracks preloaded successfully`,"warning"),this.setupPlaybackEventListeners(),this.setupWaveformEventListeners()}catch(o){console.error("Failed to preload all tracks:",o),yield this.showToast("Failed to preload tracks","danger")}})}playTrack(o){return d(this,null,function*(){try{this.isTrackPreloaded(o)||(yield this.preloadTrack(o)),yield _.playAudio({url:o}),yield this.updateTrackPlaybackInfo(o);let i=this.demoPlaylist.find(e=>e.url===o);yield this.showToast(`Playing: ${(i==null?void 0:i.title)||"Track"}`,"success")}catch(i){console.error("Failed to play track:",i),yield this.showToast("Failed to play track","danger")}})}pauseTrack(o){return d(this,null,function*(){try{yield _.pauseAudio({url:o}),yield this.updateTrackPlaybackInfo(o)}catch(i){console.error("Failed to pause track:",i),yield this.showToast("Failed to pause track","danger")}})}resumeTrack(o){return d(this,null,function*(){try{yield _.resumeAudio({url:o}),yield this.updateTrackPlaybackInfo(o)}catch(i){console.error("Failed to resume track:",i),yield this.showToast("Failed to resume track","danger")}})}stopTrack(o){return d(this,null,function*(){try{yield _.stopAudio({url:o}),yield this.updateTrackPlaybackInfo(o),this.trackPlaybackStates.update(i=>{let e=new Map(i);return e.delete(o),e})}catch(i){console.error("Failed to stop track:",i),yield this.showToast("Failed to stop track","danger")}})}seekTrack(o,i){return d(this,null,function*(){try{yield _.seekAudio({seconds:i,url:o}),yield this.updateTrackPlaybackInfo(o)}catch(e){console.error("Failed to seek track:",e),yield this.showToast("Failed to seek","danger")}})}onProgressBarClick(o,i){let v=o.target.closest("ion-progress-bar");if(v){let h=v.getBoundingClientRect(),M=o.clientX-h.left,B=Math.min(Math.max(M/h.width,0),1),S=this.getTrackDuration(i),L=B*S;S>0&&this.seekTrack(i,L)}}onSeekChange(o,i){let e=o.detail.value,v=this.getTrackDuration(i),h=e/100*v;v>0&&this.seekTrack(i,h)}updateTrackPlaybackInfo(o){return d(this,null,function*(){try{let i=yield _.getPlaybackInfo();this.trackPlaybackStates.update(e=>{let v=new Map(e);return v.set(o,i),v})}catch(i){console.error("Failed to get track playback info:",i)}})}setupPlaybackEventListeners(){_.addListener("trackChanged",o=>d(this,null,function*(){var i;console.log("Track changed to:",o.track.title),(i=o.track)!=null&&i.url&&(yield this.updateTrackPlaybackInfo(o.track.url)),yield this.showToast(`Now playing: ${o.track.title}`,"success")})),_.addListener("trackEnded",o=>d(this,null,function*(){var i;console.log("Track ended:",o.track.title),(i=o.track)!=null&&i.url&&(yield this.updateTrackPlaybackInfo(o.track.url))})),_.addListener("playbackStarted",o=>d(this,null,function*(){var i;console.log("Playback started:",o.track.title),(i=o.track)!=null&&i.url&&(yield this.updateTrackPlaybackInfo(o.track.url))})),_.addListener("playbackPaused",o=>d(this,null,function*(){var i;console.log("Playback paused:",o.track.title),(i=o.track)!=null&&i.url&&(yield this.updateTrackPlaybackInfo(o.track.url))})),_.addListener("playbackError",o=>d(this,null,function*(){console.error("Playback error:",o.message),yield this.showToast(`Playback error: ${o.message}`,"danger")})),_.addListener("playbackProgress",o=>{var i;console.log(`Progress: ${o.currentPosition}/${o.duration} seconds`),this.realtimeUpdatesActive.set(!0),(i=o.track)!=null&&i.url&&this.trackPlaybackStates.update(e=>{let v=new Map(e),h=v.get(o.track.url)||{};return v.set(o.track.url,U(P({},h),{currentPosition:o.currentPosition,duration:o.duration,isPlaying:o.isPlaying,currentTrack:o.track,currentIndex:0,status:o.isPlaying?"playing":"paused"})),v})}),_.addListener("playbackStatusChanged",o=>{var i;console.log(`Status changed to: ${o.status}, Playing: ${o.isPlaying}`),(i=o.track)!=null&&i.url&&this.trackPlaybackStates.update(e=>{let v=new Map(e);return v.set(o.track.url,{currentTrack:o.track,currentIndex:o.index,currentPosition:o.currentPosition,duration:o.duration,isPlaying:o.isPlaying,status:o.status}),v})})}setupWaveformEventListeners(){_.addListener("waveformData",o=>{console.log("Waveform level received:",o.level);let i=Date.now();this.lastEmissionTime.set(i),this.totalEmissions.update(v=>v+1);let e=o.level===0;if(this.silenceDetected.set(e),e&&(this.silenceEmissions.update(v=>v+1),console.log("Silence detected - continuous emission with level = 0")),this.waveformHistory.update(v=>[...v,o.level]),!e){let v=this.maxWaveformLevel();o.level>v&&this.maxWaveformLevel.set(o.level)}}),_.addListener("waveformInit",o=>{console.log("Waveform initialized:",o),this.showToast(`Waveform initialized with ${o.numberOfBars} bars. Speech-only: ${o.speechOnlyMode}, VAD: ${o.vadEnabled}`,"success")}),_.addListener("waveformDestroy",o=>{console.log("Waveform destroyed:",o),this.showToast(`Waveform destroyed. Reason: ${o.reason}`,"warning"),this.resetWaveformState()})}preloadRecordedAudio(o){return d(this,null,function*(){try{let e=(yield _.preloadTracks({tracks:[o.uri],preloadNext:!1})).tracks.find(v=>v.url===o.uri);e!=null&&e.loaded?(this.recordedPlaylistInitialized.set(!0),this.currentRecordedFile.set(o),yield new Promise(v=>setTimeout(v,100)),yield this.updateRecordedPlaybackInfo(),yield this.showToast(`Preloaded: ${o.filename} (${e.mimeType||"Unknown format"})`,"success"),this.preloadedFiles.update(v=>new Set([...Array.from(v),o.uri]))):yield this.showToast(`Failed to preload: ${o.filename}`,"warning")}catch(i){console.error("Failed to preload recorded audio:",i),yield this.showToast("Failed to preload audio","danger")}})}playRecordedAudio(o){return d(this,null,function*(){var i;try{o&&(!this.currentRecordedFile()||((i=this.currentRecordedFile())==null?void 0:i.uri)!==o.uri)&&(yield this.preloadRecordedAudio(o)),!this.recordedPlaylistInitialized()&&this.recordedFiles().length>0&&(yield this.preloadRecordedAudio(this.recordedFiles()[0])),yield _.playAudio(),yield this.updateRecordedPlaybackInfo()}catch(e){console.error("Failed to play recorded audio:",e),yield this.showToast("Failed to play recorded audio","danger")}})}pauseRecordedAudio(){return d(this,null,function*(){try{yield _.pauseAudio(),yield this.updateRecordedPlaybackInfo()}catch(o){console.error("Failed to pause recorded audio:",o),yield this.showToast("Failed to pause recorded audio","danger")}})}stopRecordedAudio(){return d(this,null,function*(){try{yield _.stopAudio(),yield this.updateRecordedPlaybackInfo()}catch(o){console.error("Failed to stop recorded audio:",o),yield this.showToast("Failed to stop recorded audio","danger")}})}seekRecordedAudio(o){return d(this,null,function*(){try{yield _.seekAudio({seconds:o}),yield this.updateRecordedPlaybackInfo()}catch(i){console.error("Failed to seek recorded audio:",i),yield this.showToast("Failed to seek","danger")}})}updateRecordedPlaybackInfo(){return d(this,null,function*(){try{let o=yield _.getPlaybackInfo();this.recordedAudioPlaybackInfo.set(o)}catch(o){console.error("Failed to get recorded playback info:",o)}})}isFilePreloaded(o){return this.preloadedFiles().has(o)}isCurrentlyPlaying(o){var i;return((i=this.currentRecordedFile())==null?void 0:i.uri)===o.uri&&this.isRecordedAudioPlaying()}trimAudio(o){return d(this,null,function*(){yield(yield this.alertController.create({header:"Trim Audio",message:`Trim "${o.filename}" (Duration: ${this.formatTime(o.duration)})`,inputs:[{name:"startTime",type:"number",placeholder:"Start time (seconds)",min:0,max:o.duration,value:0},{name:"endTime",type:"number",placeholder:"End time (seconds)",min:0,max:o.duration,value:o.duration}],buttons:[{text:"Cancel",role:"cancel"},{text:"Trim",handler:e=>d(this,null,function*(){try{let v=parseFloat(e.startTime)||0,h=parseFloat(e.endTime)||o.duration;if(v>=h){yield this.showToast("Invalid time range","warning");return}let M=yield _.trimAudio({uri:o.uri,start:v,end:h});console.log("\u{1F680} ~ FeaturesDemoComponent ~ trimAudio ~ result:",M);let B=U(P({},M),{isSegmentRolled:!1});this.recordedFiles.update(S=>[...S,B]),yield this.showToast("Audio trimmed successfully","success")}catch(v){console.error("Failed to trim audio:",v),yield this.showToast("Failed to trim audio","danger")}})}]})).present()})}setupRecordingEventListeners(){this.durationChangeListener&&this.durationChangeListener.remove(),this.durationChangeListener=_.addListener("durationChange",o=>{console.log("Duration updated:",o.duration),this.recordingDuration.set(o.duration)})}startDurationTimer(){return d(this,null,function*(){try{yield _.addListener("durationChange",o=>{console.log("\u{1F680} ~ FeaturesDemoComponent ~ startDurationTimer ~ event:",o),console.log("Duration updated:",o.duration),this.recordingDuration.set(o.duration)})}catch(o){console.error("Failed to get duration:",o)}})}formatTime(o){let i=Math.floor(o/60),e=Math.floor(o%60);return`${i.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}formatFileSize(o){if(o===0)return"0 Bytes";let i=1024,e=["Bytes","KB","MB","GB"],v=Math.floor(Math.log(o)/Math.log(i));return parseFloat((o/Math.pow(i,v)).toFixed(2))+" "+e[v]}selectTab(o){o&&["recording","playback","microphones","audio-info","waveform","intelligent-waveform"].includes(o)&&(this.activeTab.set(o),o==="microphones"?(this.loadAvailableMicrophones(),this.checkMicrophoneStatus()):o==="playback"&&this.refreshAllTrackStates())}refreshAllTrackStates(){return d(this,null,function*(){for(let o of Array.from(this.preloadedTracks()))try{yield this.updateTrackPlaybackInfo(o)}catch(i){console.error("Failed to refresh track state:",i)}})}updateSampleRate(o){this.recordingOptions.update(i=>U(P({},i),{sampleRate:o}))}updateChannels(o){this.recordingOptions.update(i=>U(P({},i),{channels:o}))}updateBitrate(o){this.recordingOptions.update(i=>U(P({},i),{bitrate:o}))}updateMaxDuration(o){this.maxDurationSeconds.set(o)}configureWaveform(){return d(this,null,function*(){try{let o={numberOfBars:this.waveformBars(),debounceInSeconds:this.waveformIntervalSeconds()},i=yield _.configureWaveform(o);yield this.showToast(`Waveform configured: ${i.numberOfBars} bars, ${o.debounceInSeconds}s interval`,"success")}catch(o){console.error("Error configuring waveform:",o),yield this.showToast(`Error configuring waveform: ${o.message}`,"danger")}})}configureSpeechDetection(){return d(this,null,function*(){try{let o={enabled:this.speechDetectionEnabled(),threshold:this.speechThreshold(),useVAD:this.useVAD(),calibrationDuration:this.calibrationDuration()};yield _.configureWaveformSpeechDetection(o);let i=o.enabled?`Speech detection enabled (threshold: ${o.threshold}, VAD: ${o.useVAD?"on":"off"})`:"Speech detection disabled";yield this.showToast(i,"success")}catch(o){console.error("Error configuring speech detection:",o),yield this.showToast(`Error configuring speech detection: ${o.message}`,"danger")}})}configureAdvancedVAD(){return d(this,null,function*(){try{let o={enabled:this.advancedVADEnabled(),windowSize:this.vadWindowSize(),enableVoiceFilter:this.voiceBandFilterEnabled(),debugMode:this.vadDebugMode()};if(typeof _.configureAdvancedVAD=="function"){let e=(yield _.configureAdvancedVAD(o)).estimatedLatency||o.windowSize*50;yield this.showToast(`Advanced VAD configured: ${o.windowSize} frames (~${e}ms latency), Voice filter: ${o.enableVoiceFilter?"ON":"OFF"}, Debug: ${o.debugMode?"ON":"OFF"}`,"success")}else yield this.showToast("Advanced VAD settings saved locally. Feature requires updated plugin version.","warning")}catch(o){console.error("Error configuring advanced VAD:",o),yield this.showToast(`Error configuring advanced VAD: ${o.message}`,"danger")}})}toggleWaveformEnabled(){return d(this,null,function*(){let o=!this.waveformEnabled();this.waveformEnabled.set(o),yield this.configureWaveform()})}updateWaveformBars(o){return d(this,null,function*(){this.waveformBars.set(o),yield this.configureWaveform()})}updateWaveformInterval(o){return d(this,null,function*(){this.waveformIntervalSeconds.set(o),yield this.configureWaveform()})}destroyWaveform(){return d(this,null,function*(){try{yield _.destroyWaveform(),yield this.showToast("Waveform configuration destroyed","success")}catch(o){console.error("Error destroying waveform:",o),yield this.showToast(`Error destroying waveform: ${o.message}`,"danger")}})}resetWaveformState(){this.waveformHistory.set([]),this.maxWaveformLevel.set(0),this.totalEmissions.set(0),this.silenceEmissions.set(0),this.silenceDetected.set(!1),this.lastEmissionTime.set(0),console.log("Waveform state reset")}toggleSpeechDetection(){return d(this,null,function*(){let o=!this.speechDetectionEnabled();this.speechDetectionEnabled.set(o),yield this.configureSpeechDetection()})}toggleAdvancedVAD(){return d(this,null,function*(){let o=!this.advancedVADEnabled();this.advancedVADEnabled.set(o),yield this.configureAdvancedVAD()})}updateVadWindowSize(o){var e;let i=typeof o=="number"?o:((e=o.detail)==null?void 0:e.value)||o;this.vadWindowSize.set(i),this.advancedVADEnabled()&&this.configureAdvancedVAD()}toggleVoiceBandFilter(){return d(this,null,function*(){let o=!this.voiceBandFilterEnabled();this.voiceBandFilterEnabled.set(o),this.advancedVADEnabled()&&(yield this.configureAdvancedVAD())})}toggleVadDebugMode(){return d(this,null,function*(){let o=!this.vadDebugMode();this.vadDebugMode.set(o),this.advancedVADEnabled()&&(yield this.configureAdvancedVAD())})}updateSpeechThreshold(o){return d(this,null,function*(){this.speechThreshold.set(o),this.speechDetectionEnabled()&&(yield this.configureSpeechDetection())})}toggleVAD(){return d(this,null,function*(){let o=!this.useVAD();this.useVAD.set(o),this.speechDetectionEnabled()&&(yield this.configureSpeechDetection())})}updateCalibrationDuration(o){return d(this,null,function*(){this.calibrationDuration.set(o),this.speechDetectionEnabled()&&(yield this.configureSpeechDetection())})}resetWaveformLevels(){this.waveformHistory.set([]),this.maxWaveformLevel.set(0),this.totalEmissions.set(0),this.silenceEmissions.set(0),this.silenceDetected.set(!1),this.lastEmissionTime.set(0)}showToast(o,i="success"){return d(this,null,function*(){yield(yield this.toastController.create({message:o,duration:2e3,color:i,position:"bottom"})).present()})}ngOnInit(){return d(this,null,function*(){yield this.checkPermission(),this.setupWaveformEventListeners(),this.waveformEnabled()&&(yield this.configureWaveform())})}ngOnDestroy(){this.durationChangeListener&&(this.durationChangeListener.remove(),this.durationChangeListener=null)}};l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=N({type:l,selectors:[["app-features-demo"]],decls:12,vars:1,consts:[["color","primary"],["expand","block","fill","outline","color","medium",3,"click"],["name","settings","slot","start"],["color","warning"],["name","settings"],["expand","block","fill","solid",3,"click"],["value","recording",1,"ion-no-padding","ion-no-margin",3,"click"],["name","mic-circle"],["value","playback",1,"ion-no-padding","ion-no-margin",3,"click"],["name","musical-notes"],["value","microphones",1,"ion-no-padding","ion-no-margin",3,"click"],["name","volume-high"],["value","audio-info",1,"ion-no-padding","ion-no-margin",3,"click"],["name","information-circle"],["value","waveform",1,"ion-no-padding","ion-no-margin",3,"click"],["name","pulse"],["value","intelligent-waveform",1,"ion-no-padding","ion-no-margin",3,"click"],["name","analytics"],[1,"recording-status"],[3,"color"],["size","6"],["expand","block",3,"click","disabled"],["name","mic-circle","slot","start"],["expand","block","color","warning",3,"click","disabled"],["name","mic-off-circle","slot","start"],["size","4"],["expand","block","color","success",3,"click","disabled"],["expand","block","color","danger",3,"click","disabled"],["color","light"],["name","micOffCircle"],["name","mic-off-circle"],["size","2.4"],[3,"ionChange","checked"],["size","small",3,"click","fill","color"],["expand","block",3,"click","fill","color"],["size","3"],[3,"value"],[2,"margin-top","10px"],["expand","block","fill","solid"],["expand","block","fill","outline",3,"click"],["name","stop"],["name","refresh"],["name","pause"],["name","play"],["color","primary","size","small"],["color","success","size","small"],["color","warning","size","small"],["slot","end",2,"display","flex","gap","8px"],["fill","clear"],["fill","clear","color","warning"],["fill","clear","color","success"],["fill","clear",3,"click"],["name","cut"],["name","checkmark-circle"],["name","download"],["fill","clear","color","warning",3,"click"],["fill","clear","color","success",3,"click"],["name","download","slot","start"],["color","success"],[1,"track-player-card"],[1,"playback-summary"],[1,"track-status"],[1,"preload-section"],[1,"player-controls"],["color","danger","size","small"],["color","medium","size","small"],[1,"progress-section"],[1,"control-buttons"],["expand","block","fill","solid","color","success",3,"click","disabled"],[1,"button-label"],["expand","block","fill","solid","color","warning",3,"click","disabled"],["expand","block","fill","solid","color","secondary",3,"click","disabled"],["expand","block","fill","solid","color","danger",3,"click","disabled"],[1,"seek-buttons"],["color","primary",3,"ionInput","value","min","max","pin","snaps","ticks"],["slot","start"],["slot","end"],["size","small","fill","clear",3,"click"],[2,"margin-top","8px"],["name","checkmark-circle","color","success"],["name","close-circle","color","danger"],["name","close-circle"],["name","refresh","slot","start"],["name","informationCircle","slot","start"],["button",""],["button","",3,"click"],["color","success","slot","end"],["name","checkmarkCircle","color","success","slot","end"],["size","12"],[2,"word-break","break-all"],["name","time"],[1,"waveform-controls"],[1,"ion-margin-start"],["interface","popover",3,"ionChange","value"],["expand","block","fill","clear","color","danger",3,"click"],["name","close-circle","slot","start"],[1,"speech-detection-controls"],[1,"waveform-container"],[1,"emission-stats"],["value","raw-data"],["slot","header","color","light"],["slot","content",1,"ion-padding"],[1,"raw-data"],["color","medium"],["min","3","max","20","step","1","pin","true","snaps","true",3,"ionInput","value"],["expand","block","fill","outline","color","tertiary",3,"click"],[1,"waveform-bars"],[1,"waveform-bar",3,"height","background-color","title"],[1,"waveform-bar",3,"title"]],template:function(i,e){i&1&&(s(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-title"),c(3,"Native Audio Engine Demo"),a()()(),s(4,"ion-content")(5,"ion-button",1),w("click",function(){return e.openSettings()}),m(6,"ion-icon",2),c(7," Open App Permissions "),a(),s(8,"ion-button",1),w("click",function(){return e.checkPermission()}),c(9," Check Permission "),a(),u(10,g2,14,0,"ion-card",3)(11,S4,32,7),a()),i&2&&(r(10),f(e.hasPermission()?11:10))},dependencies:[v1,x0,u0,C0,_0,h1,m1,p1,p0,w1,d1,L1,k0,M1,M0,f0,k1,z0,x1,f1,C1,u1,z1,B1,y1,V1,_1,m0,w0,W0,r0,v0,g0],styles:[".recording-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:16px;flex-wrap:wrap}.recording-mode-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}.recording-mode-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:var(--ion-color-primary)}.segment-info[_ngcontent-%COMP%]{margin-top:12px;padding:8px 12px;background:var(--ion-color-light);border-radius:8px;border-left:4px solid var(--ion-color-primary)}.segment-info[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:1.4}.duration-buttons[_ngcontent-%COMP%]{margin:12px 0}.duration-buttons[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{font-weight:500}.duration-buttons[_ngcontent-%COMP%]   ion-button[color=primary][_ngcontent-%COMP%]{--background: var(--ion-color-primary);--color: var(--ion-color-primary-contrast)}.segment-status[_ngcontent-%COMP%]{text-align:center;color:var(--ion-color-primary-contrast)}.segment-status[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{text-align:center}.segment-status[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 4px;font-size:.9rem}.segment-status[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;font-weight:700}.segment-status[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{margin:8px 0}.segment-status[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{display:block;margin-top:4px}.progress-container[_ngcontent-%COMP%]{margin:16px 0}.progress-container[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-size:14px;margin-bottom:8px;display:block}.loading-container[_ngcontent-%COMP%]{text-align:center;padding:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;color:var(--ion-color-primary-contrast)}.file-path[_ngcontent-%COMP%]{word-break:break-all;font-family:monospace;font-size:12px;color:var(--ion-color-medium)}ion-segment[_ngcontent-%COMP%]{margin:16px}ion-card[_ngcontent-%COMP%]{margin:16px}ion-chip[_ngcontent-%COMP%]{margin-right:8px}ion-item[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px}ion-range[_ngcontent-%COMP%]{width:120px}ion-button[_ngcontent-%COMP%]{margin:4px 0}.microphone-item[_ngcontent-%COMP%]{--background: var(--ion-color-light);border-radius:8px;margin:8px 0}.audio-controls[_ngcontent-%COMP%]{display:flex;gap:8px;flex-wrap:wrap}@media (max-width: 768px){ion-card[_ngcontent-%COMP%]{margin:8px}ion-range[_ngcontent-%COMP%]{width:100px}.recording-status[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.05);opacity:.8}to{transform:scale(1);opacity:1}}ion-chip[color=danger][_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_pulse 2s infinite}ion-progress-bar[_ngcontent-%COMP%]{--background: var(--ion-color-light);--progress-background: var(--ion-color-primary);border-radius:4px}ion-badge[_ngcontent-%COMP%]{font-size:10px;font-weight:700}ion-segment-button[_ngcontent-%COMP%]{min-height:50px}ion-item[button][_ngcontent-%COMP%]:hover{--background: var(--ion-color-light);cursor:pointer;transition:background-color .2s ease}ion-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}ion-grid[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}.audio-file-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-light)}.audio-file-list[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.status-indicator[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;font-size:12px;padding:4px 8px;border-radius:12px;background:var(--ion-color-light)}.status-indicator.recording[_ngcontent-%COMP%]{background:var(--ion-color-danger);color:var(--ion-color-danger-contrast)}.status-indicator.playing[_ngcontent-%COMP%]{background:var(--ion-color-success);color:var(--ion-color-success-contrast)}.status-indicator.paused[_ngcontent-%COMP%]{background:var(--ion-color-warning);color:var(--ion-color-warning-contrast)}@media (max-width: 576px){ion-col[_ngcontent-%COMP%]{padding:4px}ion-button[_ngcontent-%COMP%]{font-size:12px;--padding-start: 8px;--padding-end: 8px}}.track-info[_ngcontent-%COMP%]{margin-bottom:12px}.track-info[_ngcontent-%COMP%]   ion-progress-bar[_ngcontent-%COMP%]{margin:6px 0 4px}.track-info[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:.85rem;color:var(--ion-color-medium);display:block;margin-bottom:6px}.track-info[_ngcontent-%COMP%]   ion-chip[_ngcontent-%COMP%]{margin:0 4px 0 0}.per-url-track-card[_ngcontent-%COMP%]{margin-bottom:12px}.per-url-track-card[color=primary][_ngcontent-%COMP%]{--background: rgba(var(--ion-color-primary-rgb), .1);--border-color: var(--ion-color-primary);border:1px solid var(--border-color)}.per-url-track-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-bottom:8px}.per-url-track-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:8px;font-size:1.1rem}.per-url-track-card[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium)}.per-url-track-card[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{padding-top:0}.playback-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:8px 0}.waveform-controls[_ngcontent-%COMP%]{margin-bottom:24px}.waveform-container[_ngcontent-%COMP%]{margin-top:16px}.waveform-container[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;color:var(--ion-color-primary)}.waveform-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:.9rem}.waveform-bars[_ngcontent-%COMP%]{display:flex;align-items:end;justify-content:space-between;height:120px;padding:12px;background:var(--ion-color-light);border-radius:8px;margin:16px 0;gap:2px;overflow:hidden}.waveform-bar[_ngcontent-%COMP%]{flex:1;min-height:2px;background-color:var(--ion-color-primary);border-radius:2px 2px 0 0;transition:height .1s ease-out,background-color .2s ease}.waveform-bar[_ngcontent-%COMP%]:hover{opacity:.8}.raw-data[_ngcontent-%COMP%]{background:var(--ion-color-light);padding:12px;border-radius:4px;font-size:.8rem;max-height:200px;overflow-y:auto;word-break:break-all;white-space:pre-wrap}"],changeDetection:0});let n=l;return n})();export{k3 as FeaturesDemoComponent};
